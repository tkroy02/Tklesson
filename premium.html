<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auth0 Login Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        #btn-login {
            padding: 15px 30px;
            font-size: 1.2rem;
            color: white;
            background-color: #0b3d91;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
        }
    </style>
</head>
<body>

    <button id="btn-login">Log In</button>

    <script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>

    <script>
        window.addEventListener('load', async () => {
            const auth0 = await createAuth0Client({
                domain: 'dev-z3h014ora20yu2n4.ca.auth0.com',
                clientId: '0pjEK7SBZUMhfZZm2XtbjwMjGOUTpQX7',
                authorizationParams: {
                    redirect_uri: window.location.origin
                }
            });

            const loginBtn = document.getElementById('btn-login');

            loginBtn.addEventListener('click', () => {
                auth0.loginWithRedirect();
            });

            // This part is for handling the redirect callback after login
            const handleRedirectCallback = async () => {
                const isRedirect = window.location.search.includes('code=') || window.location.search.includes('state=');
                if (isRedirect) {
                    await auth0.handleRedirectCallback();
                    window.history.replaceState({}, document.title, window.location.pathname);
                }
            };
            handleRedirectCallback();
        });
    </script>

</body>
</html>
