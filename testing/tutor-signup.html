<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutor Application Form</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

   <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore-compat.js"></script>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBjo5LY4EsFlX8j_8NbLUObooUsCqJM8KM",
      authDomain: "tk-scheduler.firebaseapp.com",
      projectId: "tk-scheduler",
      storageBucket: "tk-scheduler.appspot.com",
      messagingSenderId: "746606755052",
      appId: "1:746606755052:web:d7eae92976cb2f2fa9f9c9",
      measurementId: "G-Q5L607R3N7"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // Shorthand references
    const auth = firebase.auth();
    const db = firebase.firestore();
  </script>

 <style>
        /* Your existing CSS styles remain unchanged */
        :root {
            --primary: #4361ee;
            --primary-light: #6a7de9;
            --secondary: #3a0ca3;
            --success: #4cc9f0;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --radius: 16px;
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fb 0%, #e4e9f2 100%);
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 1100px;
            overflow: hidden;
            transform: translateY(0);
            transition: var(--transition);
        }
        
        .container:hover {
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 35px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 60%);
            transform: rotate(30deg);
        }
        
        header h1 {
            margin-bottom: 15px;
            font-size: 36px;
            font-weight: 700;
            position: relative;
        }
        
        header p {
            opacity: 0.9;
            font-size: 18px;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }
        
        .progress-container {
            padding: 25px 35px;
            background: var(--light);
            position: relative;
        }
        
        .progress-bar {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-bottom: 30px;
        }
        
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            height: 8px;
            width: 100%;
            background-color: var(--light-gray);
            z-index: 1;
            border-radius: 4px;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            height: 8px;
            width: var(--progress, 0%);
            background: linear-gradient(to right, var(--primary), var(--success));
            z-index: 1;
            transition: width 0.5s ease;
            border-radius: 4px;
        }
        
        .progress-step {
            width: 55px;
            height: 55px;
            background-color: var(--light-gray);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--dark);
            z-index: 2;
            position: relative;
            transition: var(--transition);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .progress-step.active {
            background-color: var(--primary);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(67, 97, 238, 0.4);
        }
        
        .progress-step i {
            display: none;
        }
        
        .progress-step.completed {
            background-color: var(--success);
            color: white;
            box-shadow: 0 6px 15px rgba(76, 201, 240, 0.4);
        }
        
        .progress-step.completed span {
            display: none;
        }
        
        .progress-step.completed i {
            display: block;
        }
        
        .progress-step-title {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            margin-top: 12px;
            font-size: 14px;
            color: var(--gray);
            white-space: nowrap;
            font-weight: 600;
        }
        
        .form-container {
            padding: 40px;
        }
        
        .form-step {
            display: none;
        }
        
        .form-step.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h2 {
            margin-bottom: 30px;
            color: var(--primary);
            text-align: center;
            font-size: 32px;
            font-weight: 700;
            position: relative;
            padding-bottom: 15px;
        }
        
        h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 5px;
            background: linear-gradient(to right, var(--primary), var(--success));
            border-radius: 3px;
        }
        
        .form-group {
            margin-bottom: 30px;
        }
        
        label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--dark);
            font-size: 17px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius);
            font-size: 16px;
            transition: var(--transition);
            background-color: #f8f9fa;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 4px rgba(67, 97, 238, 0.2);
            background-color: white;
        }
        
        textarea {
            min-height: 130px;
            resize: vertical;
        }
        
        .checkbox-container {
            max-height: 300px;
            overflow-y: auto;
            padding: 15px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius);
            background: white;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
            gap: 15px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background-color: #f8f9fa;
            border-radius: var(--radius);
            transition: var(--transition);
        }
        
        .checkbox-item:hover {
            background-color: #e9ecef;
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.05);
        }
        
        .checkbox-item input {
            width: auto;
            margin-right: 15px;
            transform: scale(1.2);
        }
        
        /* Improved Availability Section */
        .availability-container {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .days-column {
            flex: 1;
        }
        
        .time-column {
            flex: 2;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .day-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: var(--radius);
            margin-bottom: 15px;
            transition: var(--transition);
            border: 2px solid var(--light-gray);
        }
        
        .day-item:hover {
            background-color: #e9ecef;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .day-item input[type="checkbox"] {
            width: auto;
            margin-right: 15px;
            transform: scale(1.2);
        }
        
        .day-item label {
            margin-bottom: 0;
            flex-grow: 1;
            cursor: pointer;
        }
        
        .time-slot {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: var(--radius);
            border: 2px solid var(--light-gray);
            margin-top: 10px;
        }
        
        .time-slot.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .time-inputs {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .time-input-group {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .time-input-group label {
            font-size: 14px;
            margin-bottom: 8px;
            color: var(--gray);
            font-weight: 500;
        }
        
        .time-inputs input {
            text-align: center;
            padding: 12px;
        }
        
        .time-inputs span {
            font-weight: 600;
            color: var(--gray);
            margin-top: 30px;
        }
        
        .time-presets {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .time-preset-btn {
            padding: 8px 12px;
            background-color: var(--light);
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: var(--transition);
        }
        
        .time-preset-btn:hover {
            background-color: var(--primary-light);
            color: white;
        }
        
        .timezone-row {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid var(--light-gray);
        }
        
        .no-selection-message {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
            font-style: italic;
            background-color: #f8f9fa;
            border-radius: var(--radius);
            border: 2px dashed var(--light-gray);
        }
        
        .btn-container {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }
        
        button {
            padding: 16px 35px;
            border: none;
            border-radius: var(--radius);
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .btn-prev {
            background-color: var(--light);
            color: var(--dark);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .btn-prev:hover {
            background-color: #e2e6ea;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .btn-next, .btn-submit {
            background: linear-gradient(to right, var(--primary), var(--primary-light));
            color: white;
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
        }
        
        .btn-next:hover, .btn-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(67, 97, 238, 0.4);
            background: linear-gradient(to right, var(--primary-light), var(--primary));
        }
        
        .firestore-response {
            margin-top: 30px;
            padding: 25px;
            border-radius: var(--radius);
            background-color: #f0f9ff;
            border-left: 5px solid var(--primary);
            display: none;
        }
        
        .success-message {
            display: none;
            text-align: center;
            padding: 60px 40px;
        }
        
        .success-message i {
            font-size: 80px;
            color: var(--success);
            margin-bottom: 30px;
            animation: bounce 1s ease;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-25px);}
            60% {transform: translateY(-15px);}
        }
        
        .success-message h2 {
            color: var(--success);
            margin-bottom: 25px;
            animation: fadeIn 1s ease;
        }
        
        .success-message p {
            margin-bottom: 20px;
            font-size: 18px;
            color: var(--gray);
            line-height: 1.8;
        }
        
        .hidden {
            display: none;
        }
        
        .subject-category {
            margin-top: 20px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-gray);
            color: var(--primary);
            font-weight: 600;
            font-size: 18px;
        }
        
        .hourly-rate-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .hourly-rate-container span {
            font-weight: 600;
            color: var(--dark);
        }
        
        @media (max-width: 992px) {
            .availability-container {
                flex-direction: column;
            }
            
            .checkbox-group {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .time-inputs {
                flex-direction: column;
                align-items: stretch;
            }
            
            .time-inputs span {
                margin: 10px 0;
                text-align: center;
            }
            
            .hourly-rate-container {
                flex-direction: column;
                align-items: flex-start;
            }
        }
        
        @media (max-width: 768px) {
            .checkbox-group {
                grid-template-columns: 1fr;
            }
            
            .progress-step {
                width: 45px;
                height: 45px;
            }
            
            .btn-container {
                flex-direction: column;
                gap: 20px;
            }
            
            button {
                width: 100%;
                justify-content: center;
            }
            
            header {
                padding: 25px 20px;
            }
            
            .form-container {
                padding: 25px;
            }
            
            h2 {
                font-size: 26px;
            }
            
            .time-inputs input {
                width: 100%;
            }
        }

/* Terms and Conditions Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: none; /* Correctly hidden by default */
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }


        .modal-overlay.active {
            display: flex; /* Correctly shown when active */
            opacity: 1;
            visibility: visible;
        }
        
        .terms-modal {
            background-color: white;
            border-radius: var(--radius);
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: translateY(50px);
            transition: transform 0.4s ease;
        }
        
        .modal-overlay.active .terms-modal {
            transform: translateY(0);
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 20px 25px;
            position: relative;
        }
        
        .modal-header h2 {
            color: white;
            margin: 0;
            padding: 0;
            text-align: left;
            font-size: 24px;
        }
        
        .modal-header h2::after {
            display: none;
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 25px;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            padding: 25px;
            overflow-y: auto;
            flex-grow: 1;
        }
        
        .modal-content section {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .modal-content h3 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .modal-content ul {
            margin: 10px 0 10px 20px;
        }
        
        .modal-content li {
            margin-bottom: 8px;
        }
        
        .modal-footer {
            padding: 20px 25px;
            background-color: var(--light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .terms-agreement {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .terms-agreement input {
            width: auto;
            transform: scale(1.2);
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
        }
        
        .btn-cancel {
            background-color: var(--light);
            color: var(--dark);
        }
        
        .btn-agree {
            background: linear-gradient(to right, var(--primary), var(--primary-light));
            color: white;
        }


        @media (max-width: 768px) {
            .checkbox-group {
                grid-template-columns: 1fr;
            }
            
            .progress-step {
                width: 45px;
                height: 45px;
            }
            
            .btn-container {
                flex-direction: column;
                gap: 20px;
            }
            
            button {
                width: 100%;
                justify-content: center;
            }
            
            header {
                padding: 25px 20px;
            }
            
            .form-container {
                padding: 25px;
            }
            
            h2 {
                font-size: 26px;
            }
        }

    </style>
</head>
<body>

<div class="modal-overlay" id="termsModal">
    <div class="terms-modal">
        <div class="modal-header">
            <h2>Tklesson Tutor Terms and Conditions</h2>
            <button class="close-modal" id="closeModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-content">
            <h3>1. Introduction</h3>
            <p>Welcome to Tklesson! These Terms and Conditions govern your use of our platform as a tutor. By registering, you agree to these terms.</p>
            
            <h3>2. Tutor Responsibilities</h3>
            <ul>
                <li>Provide accurate and complete personal and professional information.</li>
                <li>Maintain the confidentiality of your account password and all student data.</li>
                <li>Use the platform exclusively for its intended purpose of providing tutoring services.</li>
                <li>Conduct yourself professionally and ethically in all interactions with students and parents.</li>
            </ul>
            
            <h3>3. Independent Contractor Status</h3>
            <p>You acknowledge that you are an independent contractor and not an employee of Tklesson. You are solely responsible for setting your own hours, managing your sessions, and determining your teaching methods.</p>
            
            <h3>4. Payments and Compensation</h3>
            <p>Tklesson will process payments from students on your behalf, less any applicable platform fees. You agree not to solicit or accept payments directly from students for services arranged through the platform.</p>
            
            <h3>5. Prohibited Conduct</h3>
            <ul>
                <li>Using the platform for any illegal or unauthorized purpose.</li>
                <li>Harassing or bullying other users.</li>
                <li>Attempting to bypass the Tklesson platform to arrange private sessions with students you met through our service.</li>
                <li>Distributing malicious code or content.</li>
            </ul>
            
            <h3>6. Limitation of Liability</h3>
            <p>Tklesson acts as a platform to connect tutors and students. We are not responsible for the quality of tutoring services provided by individual tutors. Your use of the service is at your own risk.</p>
            
            <h3>7. Termination</h3>
            <p>We reserve the right to terminate or suspend your account at our sole discretion, without notice, for conduct that we believe violates these Terms and Conditions or is harmful to other users of the platform.</p>
        </div>
        <div class="modal-footer">
            <div class="terms-agreement">
                <input type="checkbox" id="agreeTerms" required>
                <label for="agreeTerms">I have read and agree to the Tklesson Tutor Terms and Conditions and Privacy Policy</label>
            </div>
            <div class="modal-buttons">
                <button class="btn-cancel" id="cancelButton">Cancel</button>
                <button class="btn-agree" id="agreeButton" disabled>Agree & Continue</button>
            </div>
        </div>
    </div>
</div>
    
    <div class="container">
        <header>
            <h1>Tutor Application Form</h1>
            <p>Join our team of expert educators and help students achieve their goals</p>
        </header>
        
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-step active" data-title="Personal">
                    <span>1</span>
                    <i class="fas fa-check"></i>
                    <div class="progress-step-title">Personal</div>
                </div>
                <div class="progress-step" data-title="Professional">
                    <span>2</span>
                    <i class="fas fa-check"></i>
                    <div class="progress-step-title">Professional</div>
                </div>
                <div class="progress-step" data-title="Subjects">
                    <span>3</span>
                    <i class="fas fa-check"></i>
                    <div class="progress-step-title">Subjects</div>
                </div>
                <div class="progress-step" data-title="Availability">
                    <span>4</span>
                    <i class="fas fa-check"></i>
                    <div class="progress-step-title">Availability</div>
                </div>
                <div class="progress-step" data-title="Account">
                    <span>5</span>
                    <i class="fas fa-check"></i>
                    <div class="progress-step-title">Account</div>
                </div>
            </div>
        </div>
        
        <div class="form-container">
            <form id="tutorApplication">
                <!-- Step 1: Personal Information -->
                <div class="form-step active" id="step-1">
                    <h2>Personal Information</h2>
                    
                    <div class="form-group">
                        <label for="fullName">Full Name *</label>
                        <input type="text" id="fullName" name="fullName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" name="phone">
                    </div>
                    
                    <div class="btn-container">
                        <div></div>
                        <button type="button" class="btn-next">Next <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                
                <!-- Step 2: Professional Information -->
                <div class="form-step" id="step-2">
                    <h2>Professional Information</h2>
                    
                    <div class="form-group">
                        <label for="qualifications">Qualifications/Credentials *</label>
                        <textarea id="qualifications" name="qualifications" placeholder="Degrees, certifications, etc." required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="university">University/College *</label>
                        <textarea id="university" name="university" placeholder="e.g., Havard University." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="bio">Bio/About Me *</label>
                        <textarea id="bio" name="bio" placeholder="Your professional background and teaching philosophy" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="experience">Years of Teaching Experience *</label>
                        <select id="experience" name="experience" required>
                            <option value="">Select years</option>
                            <option value="0-1">Less than 1 year</option>
                            <option value="1-3">1-3 years</option>
                            <option value="3-5">3-5 years</option>
                            <option value="5-10">5-10 years</option>
                            <option value="10+">10+ years</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="hourlyRate">Hourly Rate ($) *</label>
                        <div class="hourly-rate-container">
                            <span>$</span>
                            <input type="number" id="hourlyRate" name="hourlyRate" min="20" max="200" step="5" value="40" required>
                            <span>per hour</span>
                        </div>
                    </div>
                    
                    <div class="btn-container">
                        <button type="button" class="btn-prev"><i class="fas fa-arrow-left"></i> Previous</button>
                        <button type="button" class="btn-next">Next <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                
               <!-- Step 3: Subjects and Grade Levels -->
                <div class="form-step" id="step-3">
                    <h2>Subjects & Grade Levels</h2>
                    
                    <div class="form-group">
                        <label>Subjects/Specializations *</label>
                        <div class="checkbox-container">
                            <div class="subject-category">Mathematics</div>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="math" name="subjects" value="Mathematics">
                                    <label for="math">Mathematics</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="algebra1" name="subjects" value="Algebra 1">
                                    <label for="algebra1">Algebra 1</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="algebra2" name="subjects" value="Algebra 2">
                                    <label for="algebra2">Algebra 2</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="geometry" name="subjects" value="Geometry">
                                    <label for="geometry">Geometry</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="pre-calc" name="subjects" value="Pre-Calculus">
                                    <label for="pre-calc">Pre-Calculus</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="ap-calc" name="subjects" value="AP Calculus">
                                    <label for="ap-calc">AP Calculus</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="trigonometry" name="subjects" value="Trigonometry">
                                    <label for="trigonometry">Trigonometry</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="statistics" name="subjects" value="Statistics">
                                    <label for="statistics">Statistics</label>
                                </div>
                            </div>
                            
                            <div class="subject-category">Sciences</div>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="physics" name="subjects" value="Physics">
                                    <label for="physics">Physics</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="ap-physics1" name="subjects" value="AP Physics 1">
                                    <label for="ap-physics1">AP Physics 1</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="ap-physics2" name="subjects" value="AP Physics 2">
                                    <label for="ap-physics2">AP Physics 2</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="ap-physics-c-mech" name="subjects" value="AP Physics C Mechanics">
                                    <label for="ap-physics-c-mech">AP Physics C Mechanics</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="ap-physics-c-em" name="subjects" value="AP Physics C Electricity and Magnetism">
                                    <label for="ap-physics-c-em">AP Physics C E&M</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="chemistry" name="subjects" value="Chemistry">
                                    <label for="chemistry">Chemistry</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="biology" name="subjects" value="Biology">
                                    <label for="biology">Biology</label>
                                </div>
                              <div class="checkbox-item">
                                    <input type="checkbox" id="ap-biology" name="subjects" value="AP Biology">
                                    <label for="ap-biology">AP Biology</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="environmental" name="subjects" value="Environmental Science">
                                    <label for="environmental">Environmental Science</label>
                                </div>
                            </div>
                            
                            <div class="subject-category">English & Humanities</div>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="english" name="subjects" value="English">
                                    <label for="english">English</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="literature" name="subjects" value="Literature">
                                    <label for="literature">Literature</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="writing" name="subjects" value="Writing">
                                    <label for="writing">Writing</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="grammar" name="subjects" value="Grammar">
                                    <label for="grammar">Grammar</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="history" name="subjects" value="History">
                                    <label for="history">History</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="government" name="subjects" value="Government">
                                    <label for="government">Government</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="economics" name="subjects" value="Economics">
                                    <label for="economics">Economics</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="ap-macro" name="subjects" value="AP Macroeconomics">
                                    <label for="ap-macro">AP Macroeconomics</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="ap-micro" name="subjects" value="AP Microeconomics">
                                    <label for="ap-micro">AP Microeconomics</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="psychology" name="subjects" value="Psychology">
                                    <label for="psychology">Psychology</label>
                                </div>
                            </div>
                            
                            <div class="subject-category">World Languages</div>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="spanish" name="subjects" value="Spanish">
                                    <label for="spanish">Spanish</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="french" name="subjects" value="French">
                                    <label for="french">French</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="german" name="subjects" value="German">
                                    <label for="german">German</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="latin" name="subjects" value="Latin">
                                    <label for="latin">Latin</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="mandarin" name="subjects" value="Mandarin">
                                    <label for="mandarin">Mandarin</label>
                                </div>
                            </div>
                            
                            <div class="subject-category">Computer Science & Technology</div>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="cs" name="subjects" value="Computer Science">
                                    <label for="cs">Computer Science</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="programming" name="subjects" value="Programming">
                                    <label for="programming">Programming</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="web-design" name="subjects" value="Web Design">
                                    <label for="web-design">Web Design</label>
                                </div>
                            </div>
                            
                            <div class="subject-category">Test Preparation</div>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="sat-prep" name="subjects" value="SAT">
                                    <label for="sat-prep">SAT</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="act" name="subjects" value="ACT">
                                    <label for="act">ACT</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="gre" name="subjects" value="GRE">
                                    <label for="gre">GRE</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="gmat" name="subjects" value="GMAT">
                                    <label for="gmat">GMAT</label>
                                </div>
                            </div>
                            
                            <div class="subject-category">Arts & Electives</div>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="art" name="subjects" value="Art">
                                    <label for="art">Art</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="music" name="subjects" value="Music">
                                    <label for="music">Music</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="theater" name="subjects" value="Theater">
                                    <label for="theater">Theater</label>
                                </div>
                            </div>
                        </div>
                    </div>

           
                    
                    <div class="form-group">
                        <label>Grade Levels *</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="elementary" name="gradeLevels" value="Elementary School">
                                <label for="elementary">Elementary School</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="middle" name="gradeLevels" value="Middle School">
                                <label for="middle">Middle School</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="high" name="gradeLevels" value="High School">
                                <label for="high">High School</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="college" name="gradeLevels" value="College">
                                <label for="college">College</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="adult" name="gradeLevels" value="Adult Education">
                                <label for="adult">Adult Education</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="btn-container">
                        <button type="button" class="btn-prev"><i class="fas fa-arrow-left"></i> Previous</button>
                        <button type="button" class="btn-next">Next <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                
                <!-- Step 4: Availability - Improved Version -->
                <div class="form-step" id="step-4">
                    <h2>Availability & Technical Setup</h2>
                    
                    <div class="form-group">
                        <label>Weekly Availability *</label>
                        <div class="availability-container">
                            <div class="days-column">
                                <div class="day-item">
                                    <input type="checkbox" id="mon" name="availability" value="Monday">
                                    <label for="mon">Monday</label>
                                </div>
                                <div class="day-item">
                                    <input type="checkbox" id="tue" name="availability" value="Tuesday">
                                    <label for="tue">Tuesday</label>
                                </div>
                                <div class="day-item">
                                    <input type="checkbox" id="wed" name="availability" value="Wednesday">
                                    <label for="wed">Wednesday</label>
                                </div>
                                <div class="day-item">
                                    <input type="checkbox" id="thu" name="availability" value="Thursday">
                                    <label for="thu">Thursday</label>
                                </div>
                                <div class="day-item">
                                    <input type="checkbox" id="fri" name="availability" value="Friday">
                                    <label for="fri">Friday</label>
                                </div>
                                <div class="day-item">
                                    <input type="checkbox" id="saturday" name="availability" value="Saturday">
                                    <label for="saturday">Saturday</label>
                                </div>
                                <div class="day-item">
                                    <input type="checkbox" id="sun" name="availability" value="Sunday">
                                    <label for="sun">Sunday</label>
                                </div>
                            </div>
                            
                            <div class="time-column" id="timeColumn">
                                <div class="time-slot" id="mon-time">
                                    <h3>Monday Availability</h3>
                                    <div class="time-inputs">
                                        <div class="time-input-group">
                                            <label for="mon-start">Start Time</label>
                                            <input type="time" id="mon-start" name="mon-start" min="00:00" max="24:00" step="300">
                                        </div>
                                        <span>to</span>
                                        <div class="time-input-group">
                                            <label for="mon-end">End Time</label>
                                            <input type="time" id="mon-end" name="mon-end" min="00:00" max="24:00" step="300">
                                        </div>
                                    </div>
                                    <div class="time-presets">
                                        <div class="time-preset-btn" data-day="mon" data-start="09:00" data-end="12:00">Morning (9am-12pm)</div>
                                        <div class="time-preset-btn" data-day="mon" data-start="13:00" data-end="17:00">Afternoon (1pm-5pm)</div>
                                        <div class="time-preset-btn" data-day="mon" data-start="18:00" data-end="21:00">Evening (6pm-9pm)</div>
                                    </div>
                                </div>
                                
                                <div class="time-slot" id="tue-time">
                                    <h3>Tuesday Availability</h3>
                                    <div class="time-inputs">
                                        <div class="time-input-group">
                                            <label for="tue-start">Start Time</label>
                                            <input type="time" id="tue-start" name="tue-start" min="00:00" max="24:00" step="300">
                                        </div>
                                        <span>to</span>
                                        <div class="time-input-group">
                                            <label for="tue-end">End Time</label>
                                            <input type="time" id="tue-end" name="tue-end" min="00:00" max="24:00" step="300">
                                        </div>
                                    </div>
                                    <div class="time-presets">
                                        <div class="time-preset-btn" data-day="tue" data-start="09:00" data-end="12:00">Morning (9am-12pm)</div>
                                        <div class="time-preset-btn" data-day="tue" data-start="13:00" data-end="17:00">Afternoon (1pm-5pm)</div>
                                        <div class="time-preset-btn" data-day="tue" data-start="18:00" data-end="21:00">Evening (6pm-9pm)</div>
                                    </div>
                                </div>
                                
                                <div class="time-slot" id="wed-time">
                                    <h3>Wednesday Availability</h3>
                                    <div class="time-inputs">
                                        <div class="time-input-group">
                                            <label for="wed-start">Start Time</label>
                                            <input type="time" id="wed-start" name="wed-start" min="00:00" max="24:00" step="300">
                                        </div>
                                        <span>to</span>
                                        <div class="time-input-group">
                                            <label for="wed-end">End Time</label>
                                            <input type="time" id="wed-end" name="wed-end" min="00:00" max="24:00" step="300">
                                        </div>
                                    </div>
                                    <div class="time-presets">
                                        <div class="time-preset-btn" data-day="wed" data-start="09:00" data-end="12:00">Morning (9am-12pm)</div>
                                        <div class="time-preset-btn" data-day="wed" data-start="13:00" data-end="17:00">Afternoon (1pm-5pm)</div>
                                        <div class="time-preset-btn" data-day="wed" data-start="18:00" data-end="21:00">Evening (6pm-9pm)</div>
                                    </div>
                                </div>
                                
                                <div class="time-slot" id="thu-time">
                                    <h3>Thursday Availability</h3>
                                    <div class="time-inputs">
                                        <div class="time-input-group">
                                            <label for="thu-start">Start Time</label>
                                            <input type="time" id="thu-start" name="thu-start" min="00:00" max="24:00" step="300">
                                        </div>
                                        <span>to</span>
                                        <div class="time-input-group">
                                            <label for="thu-end">End Time</label>
                                            <input type="time" id="thu-end" name="thu-end" min="00:00" max="24:00" step="300">
                                        </div>
                                    </div>
                                    <div class="time-presets">
                                        <div class="time-preset-btn" data-day="thu" data-start="09:00" data-end="12:00">Morning (9am-12pm)</div>
                                        <div class="time-preset-btn" data-day="thu" data-start="13:00" data-end="17:00">Afternoon (1pm-5pm)</div>
                                        <div class="time-preset-btn" data-day="thu" data-start="18:00" data-end="21:00">Evening (6pm-9pm)</div>
                                    </div>
                                </div>
                                
                                <div class="time-slot" id="fri-time">
                                    <h3>Friday Availability</h3>
                                    <div class="time-inputs">
                                        <div class="time-input-group">
                                            <label for="fri-start">Start Time</label>
                                            <input type="time" id="fri-start" name="fri-start" min="00:00" max="24:00" step="300">
                                        </div>
                                        <span>to</span>
                                        <div class="time-input-group">
                                            <label for="fri-end">End Time</label>
                                            <input type="time" id="fri-end" name="fri-end" min="00:00" max="24:00" step="300">
                                        </div>
                                    </div>
                                    <div class="time-presets">
                                        <div class="time-preset-btn" data-day="fri" data-start="09:00" data-end="12:00">Morning (9am-12pm)</div>
                                        <div class="time-preset-btn" data-day="fri" data-start="13:00" data-end="17:00">Afternoon (1pm-5pm)</div>
                                        <div class="time-preset-btn" data-day="fri" data-start="18:00" data-end="21:00">Evening (6pm-9pm)</div>
                                    </div>
                                </div>
                                
                                <div class="time-slot" id="saturday-time">
                                    <h3>Saturday Availability</h3>
                                    <div class="time-inputs">
                                        <div class="time-input-group">
                                            <label for="saturday-start">Start Time</label>
                                            <input type="time" id="saturday-start" name="saturday-start" min="00:00" max="24:00" step="300">
                                        </div>
                                        <span>to</span>
                                        <div class="time-input-group">
                                            <label for="saturday-end">End Time</label>
                                            <input type="time" id="saturday-end" name="saturday-end" min="00:00" max="24:00" step="300">
                                        </div>
                                    </div>
                                    <div class="time-presets">
                                        <div class="time-preset-btn" data-day="saturday" data-start="09:00" data-end="12:00">Morning (9am-12pm)</div>
                                        <div class="time-preset-btn" data-day="saturday" data-start="13:00" data-end="17:00">Afternoon (1pm-5pm)</div>
                                        <div class="time-preset-btn" data-day="saturday" data-start="18:00" data-end="21:00">Evening (6pm-9pm)</div>
                                    </div>
                                </div>
                                
                                <div class="time-slot" id="sun-time">
                                    <h3>Sunday Availability</h3>
                                    <div class="time-inputs">
                                        <div class="time-input-group">
                                            <label for="sun-start">Start Time</label>
                                            <input type="time" id="sun-start" name="sun-start" min="00:00" max="24:00" step="300">
                                        </div>
                                        <span>to</span>
                                        <div class="time-input-group">
                                            <label for="sun-end">End Time</label>
                                            <input type="time" id="sun-end" name="sun-end" min="00:00" max="24:00" step="300">
                                        </div>
                                    </div>
                                    <div class="time-presets">
                                        <div class="time-preset-btn" data-day="sun" data-start="09:00" data-end="12:00">Morning (9am-12pm)</div>
                                        <div class="time-preset-btn" data-day="sun" data-start="13:00" data-end="17:00">Afternoon (1pm-5pm)</div>
                                        <div class="time-preset-btn" data-day="sun" data-start="18:00" data-end="21:00">Evening (6pm-9pm)</div>
                                    </div>
                                </div>
                                
                                <div class="no-selection-message" id="noDaySelected">
                                    <i class="fas fa-calendar-alt fa-3x"></i>
                                    <h3>Select a day to set availability</h3>
                                    <p>Click on a day from the list to set your available time slots</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group timezone-row">
                        <label for="timezone">Your Time Zone *</label>
                        <select id="timezone" name="timezone" required>
                            <option value="">Select your time zone</option>
                            <option value="EST">Eastern Standard Time (EST)</option>
                            <option value="CST">Central Standard Time (CST)</option>
                            <option value="MST">Mountain Standard Time (MST)</option>
                            <option value="PST">Pacific Standard Time (PST)</option>
                            <option value="AKST">Alaska Standard Time (AKST)</option>
                            <option value="HST">Hawaii Standard Time (HST)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Technical Setup *</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="laptop" name="equipment" value="Laptop/Computer" required>
                                <label for="laptop">Laptop/Computer</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="webcam" name="equipment" value="Webcam" required>
                                <label for="webcam">Webcam</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="microphone" name="equipment" value="Microphone" required>
                                <label for="microphone">Microphone</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="stable-internet" name="equipment" value="Stable Internet" required>
                                <label for="stable-internet">Stable Internet Connection</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="btn-container">
                        <button type="button" class="btn-prev"><i class="fas fa-arrow-left"></i> Previous</button>
                        <button type="button" class="btn-next">Next <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                
                <!-- Step 5: Account Creation -->
                <div class="form-step" id="step-5">
                    <h2>Account Creation</h2>
                    
                    <div class="form-group">
                        <label for="password">Create Password *</label>
                        <input type="password" id="password" name="password" minlength="8" required>
                        <small>Must be at least 8 characters long</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password *</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" required>
                    </div>
                    
               <div class="form-group">
                    <label for="terms">
                        <input type="checkbox" id="terms" name="terms" required>
                        I agree to the <a href="#" id="showTerms">Terms and Conditions</a> *
                    </label>
                    <div class="error-message" id="termsError">You must agree to the terms</div>
                </div>
                    
                    <div class="firestore-response" id="firestoreResponse"></div>
                    
                    <div class="btn-container">
                        <button type="button" class="btn-prev"><i class="fas fa-arrow-left"></i> Previous</button>
                        <button type="submit" class="btn-submit">Submit Application <i class="fas fa-check"></i></button>
                    </div>
                </div>
            </form>
            
            <!-- Success Message -->
            <div class="success-message" id="successMessage">
                <i class="fas fa-check-circle"></i>
                <h2>Application Submitted Successfully!</h2>
                <p>Thank you for applying to become a tutor with us. We will review your application and contact you within 3-5 business days.</p>
                <p>You will receive a confirmation email shortly.</p>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const form = document.getElementById('tutorApplication');
        const steps = document.querySelectorAll('.form-step');
        const progressSteps = document.querySelectorAll('.progress-step');
        const nextBtns = document.querySelectorAll('.btn-next');
        const prevBtns = document.querySelectorAll('.btn-prev');
        const submitBtn = document.querySelector('.btn-submit');
        const successMessage = document.getElementById('successMessage');
        const firestoreResponse = document.getElementById('firestoreResponse');
        
        // Form Data
        let formData = {
            personal: {},
            professional: {},
            subjects: {},
            availability: {},
            account: {}
        };
        
        // Current Step
        let currentStep = 0;
        
        // Initialize the form
        function initForm() {
            // Show the first step
            showStep(currentStep);
            
            // Event listeners for next buttons
            nextBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    if (validateStep(currentStep)) {
                        saveStepData(currentStep);
                        currentStep++;
                        updateProgressBar();
                        showStep(currentStep);
                    }
                });
            });
            
            // Event listeners for previous buttons
            prevBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    currentStep--;
                    updateProgressBar();
                    showStep(currentStep);
                });
            });
            
            // Form submission
            form.addEventListener('submit', handleSubmit);
            
            // Availability checkboxes
            document.querySelectorAll('input[name="availability"]').forEach(checkbox => {
                checkbox.addEventListener('change', toggleTimeSlot);
            });
            
            // Time preset buttons
            document.querySelectorAll('.time-preset-btn').forEach(btn => {
                btn.addEventListener('click', setPresetTime);
            });
        }
        
        // Show the current step
        function showStep(stepIndex) {
            steps.forEach((step, i) => {
                const isCurrent = i === stepIndex;
                step.style.display = isCurrent ? 'block' : 'none';

                // Toggle required attributes
                step.querySelectorAll('input, select, textarea').forEach(input => {
                    if (isCurrent) {
                        if (input.dataset.wasRequired) {
                            input.setAttribute('required', 'required');
                        }
                    } else {
                        if (input.hasAttribute('required')) {
                            input.dataset.wasRequired = true;
                            input.removeAttribute('required');
                        }
                    }
                });
            });
        }
        
        // Update the progress bar
        function updateProgressBar() {
            // Update progress steps
            progressSteps.forEach((step, i) => {
                if (i < currentStep) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (i === currentStep) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
            });
            
            // Update progress bar width
            const progressPercent = (currentStep / (steps.length - 1)) * 100;
            document.documentElement.style.setProperty('--progress', `${progressPercent}%`);
        }

        // Error handling
        // Show error message
        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
            return false;
        }
        
        // Hide error message
        function hideError(elementId) {
            const errorElement = document.getElementById(elementId);
            errorElement.style.display = 'none';
            return true;
        }
        
        // Validate the current step
        function validateStep(stepIndex) {
            const currentStepElement = steps[stepIndex];
            const inputs = currentStepElement.querySelectorAll('input, select, textarea');
            let isValid = true;
            
            inputs.forEach(input => {
                if (input.hasAttribute('required') && !input.value.trim()) {
                    input.style.borderColor = 'var(--accent)';
                    isValid = false;
                    
                    // Reset border color when user starts typing
                    input.addEventListener('input', () => {
                        input.style.borderColor = '';
                    });
                }
            });
            
            // Additional validation for specific steps
            if (stepIndex === 2) { // Subjects step
                const subjectChecked = document.querySelectorAll('input[name="subjects"]:checked').length > 0;
                const gradeChecked = document.querySelectorAll('input[name="gradeLevels"]:checked').length > 0;
                
                if (!subjectChecked) {
                    alert('Please select at least one subject.');
                    isValid = false;
                }
                
                if (!gradeChecked) {
                    alert('Please select at least one grade level.');
                    isValid = false;
                }
            }
            
           if (stepIndex === 3) { // Availability step
    const availabilityChecked = document.querySelectorAll('input[name="availability"]:checked').length > 0;
    const equipmentChecked = document.querySelectorAll('input[name="equipment"]:checked').length; // REMOVED > 0
    const timezoneSelected = document.getElementById('timezone').value;
    
    if (!availabilityChecked) {
        alert('Please select at least one day of availability.');
        isValid = false;
    }
    
    if (!timezoneSelected) {
        alert('Please select your time zone.');
        isValid = false;
    }
    
    if (equipmentChecked < 4) { // Now this works correctly
        alert('Please confirm you have all the required equipment.');
        isValid = false;
    }
}
            
            if (stepIndex === 4) { // Account step
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                const terms = document.getElementById('terms').checked;
                
                if (password.length < 8) {
                    alert('Password must be at least 8 characters long.');
                    isValid = false;
                }
                
                if (password !== confirmPassword) {
                    alert('Passwords do not match.');
                    isValid = false;
                }

                if (!terms) {
                    isValid = showError('termsError', 'You must agree to the terms');
                } else {
                    hideError('termsError');
                }
            }
            
            return isValid;
        }
        
        // Save data from the current step
        function saveStepData(stepIndex) {
            const currentStepElement = steps[stepIndex];
            const inputs = currentStepElement.querySelectorAll('input, select, textarea');
            
            inputs.forEach(input => {
                if (input.type === 'checkbox') {
                    if (input.checked) {
                        if (!formData.subjects[input.name]) {
                            formData.subjects[input.name] = [];
                        }
                        formData.subjects[input.name].push(input.value);
                    }
                } else {
                    switch(stepIndex) {
                        case 0:
                            formData.personal[input.name] = input.value;
                            break;
                        case 1:
                            formData.professional[input.name] = input.value;
                            break;
                        case 2:
                            formData.subjects[input.name] = input.value;
                            break;
                        case 3:
                            formData.availability[input.name] = input.value;
                            break;
                        case 4:
                            formData.account[input.name] = input.value;
                            break;
                    }
                }
            });
            
            console.log('Form Data:', formData);
        }
        
        // Toggle time slot visibility based on day selection
        function toggleTimeSlot(e) {
            const day = e.target.id;
            const timeSlot = document.getElementById(`${day}-time`);
            const noSelectionMessage = document.getElementById('noDaySelected');
            
            // Hide all time slots first
            document.querySelectorAll('.time-slot').forEach(slot => {
                slot.classList.remove('active');
            });
            
            // Show the selected time slot
            if (e.target.checked) {
                timeSlot.classList.add('active');
                noSelectionMessage.style.display = 'none';
            }
            
            // Show no selection message if no days are selected
            const anyDaySelected = document.querySelectorAll('input[name="availability"]:checked').length > 0;
            noSelectionMessage.style.display = anyDaySelected ? 'none' : 'block';
        }
        
        // Set preset time for a day
        function setPresetTime(e) {
            const presetData = e.target.dataset;
            const day = presetData.day;
            
            document.getElementById(`${day}-start`).value = presetData.start;
            document.getElementById(`${day}-end`).value = presetData.end;
        }

// Terms and Conditions Modal functionality
        const termsModal = document.getElementById('termsModal');
        const showTermsLink = document.getElementById('showTerms');
        const closeModal = document.getElementById('closeModal');
        const cancelButton = document.getElementById('cancelButton');
        const agreeButton = document.getElementById('agreeButton');
        const agreeTermsCheckbox = document.getElementById('agreeTerms');
        const termsCheckbox = document.getElementById('terms');

        // Open modal when Terms link is clicked
        showTermsLink.addEventListener('click', function(e) {
            e.preventDefault();
            termsModal.classList.add('active'); // Use a class to manage visibility
        });

        // Close modal functions
        function closeTermsModal() {
            termsModal.classList.remove('active'); // Use a class to manage visibility
        }

        closeModal.addEventListener('click', closeTermsModal);
        cancelButton.addEventListener('click', closeTermsModal);

        // Handle agreement
        agreeButton.addEventListener('click', function() {
            if (agreeTermsCheckbox.checked) {
                termsCheckbox.checked = true;
                hideError('termsError');
                closeTermsModal();
            }
        });

        // Enable/disable Agree button based on checkbox
        agreeTermsCheckbox.addEventListener('change', function() {
            agreeButton.disabled = !this.checked;
        });

        // Close modal when clicking outside content
        termsModal.addEventListener('click', function(e) {
            if (e.target === termsModal) {
                closeTermsModal();
            }
        });
        
// Handle form submission
function handleSubmit(e) {
    e.preventDefault();
    
    if (validateStep(currentStep)) {
        saveStepData(currentStep);
        
        // Show loading state
        submitBtn.innerHTML = 'Submitting... <i class="fas fa-spinner fa-spin"></i>';
        submitBtn.disabled = true;
        
        // Create user account with email and password
        const email = formData.personal.email;
        const password = formData.account.password;
        
        auth.createUserWithEmailAndPassword(email, password)
            .then((userCredential) => {
                // User created successfully
                const user = userCredential.user;


                
                // Prepare data for Firestore - All in tutors collection
                const tutorData = {
                    personal: formData.personal,
                    professional: formData.professional,
                    subjects: formData.subjects,
                    availability: formData.availability,
                    available: false, // Boolean field for availability
                    approved: false,   // Boolean field for easy filtering
                    rating: 0,
                    reviews: 0,
                    totalSessions: 0,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                };

                // Save to tutors collection
                db.collection('tutors').doc(user.uid).set(tutorData)
                    .then(() => {
                        // Success
                        form.style.display = 'none';
                        successMessage.style.display = 'block';
                        
                        // Redirect to index.html after 5 seconds
                        setTimeout(() => {
                            window.location.href = 'index.html';
                        }, 5000);
                    })
                    .catch((error) => {
                        // Handle errors
                        console.error('Error:', error);
                        firestoreResponse.textContent = `Error: ${error.message}`;
                        firestoreResponse.style.display = 'block';
                        firestoreResponse.style.backgroundColor = '#fff5f5';
                        firestoreResponse.style.borderLeftColor = '#e53e3e';
                        
                        submitBtn.innerHTML = 'Submit Application <i class="fas fa-check"></i>';
                        submitBtn.disabled = false;
                    });
            })
            .catch((error) => {
                // Handle authentication errors
                console.error('Auth Error:', error);
                firestoreResponse.textContent = `Authentication Error: ${error.message}`;
                firestoreResponse.style.display = 'block';
                firestoreResponse.style.backgroundColor = '#fff5f5';
                firestoreResponse.style.borderLeftColor = '#e53e3e';
                
                submitBtn.innerHTML = 'Submit Application <i class="fas fa-check"></i>';
                submitBtn.disabled = false;
            });
    }
}
        
        // Initialize the form when the DOM is loaded
        document.addEventListener('DOMContentLoaded', initForm);
    </script>
</body>
</html>
