<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tutor Application Form</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Firebase SDK v12 (compat) -->
  <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore-compat.js"></script>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBjo5LY4EsFlX8j_8NbLUObooUsCqJM8KM",
      authDomain: "tk-scheduler.firebaseapp.com",
      projectId: "tk-scheduler",
      storageBucket: "tk-scheduler.appspot.com",
      messagingSenderId: "746606755052",
      appId: "1:746606755052:web:d7eae92976cb2f2fa9f9c9",
      measurementId: "G-Q5L607R3N7"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // Shorthand references
    const auth = firebase.auth();
    const db = firebase.firestore();
  </script>

  <style>
    /* ===================
       Form & Layout Styles
       =================== */
    :root {
      --bg-color: #121212;
      --form-bg: #1e1e1e;
      --text-color: #e0e0e0;
      --primary-color: #4CAF50;
      --primary-light: #6ec071;
      --primary-dark: #3d8b40;
      --secondary-color: #FFC107;
      --border-color: #333;
      --input-bg: #2b2b2b;
      --hover-bg: #383838;
      --error-color: #f44336;
      --focus-glow: 0 0 0 3px rgba(76, 175, 80, 0.3);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      overflow-x: hidden;
      line-height: 1.6;
    }

    .container {
      width: 90%;
      max-width: 800px;
      padding: 2.5rem;
      background: rgba(30, 30, 30, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      border: 1px solid var(--border-color);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
      position: relative;
    }

    h1 { text-align: center; color: var(--primary-color); margin-bottom: 0.5rem; }
    p { text-align: center; color: var(--secondary-color); margin-bottom: 2rem; }

    .form-section { background-color: var(--form-bg); padding: 2rem; border-radius: 12px; margin-bottom: 2rem; border: 1px solid var(--border-color); }
    h2 { color: var(--primary-color); margin-bottom: 1.5rem; }

    .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
    .form-group { margin-bottom: 1.5rem; position: relative; }
    .form-group label.required::after { content: ' *'; color: var(--error-color); margin-left: 3px; }

    input, textarea, select {
      width: 100%;
      padding: 0.8rem 1rem;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      background-color: var(--input-bg);
      color: var(--text-color);
      font-size: 1rem;
      font-family: inherit;
    }

    input:focus, textarea:focus, select:focus { outline: none; border-color: var(--primary-color); box-shadow: var(--focus-glow); }
    input.error, textarea.error, select.error { border-color: var(--error-color); }

    .error-message { color: var(--error-color); font-size: 0.85rem; min-height: 20px; margin-top: 0.3rem; }

    .button-container { display: flex; gap: 15px; margin-top: 1.5rem; }
    button { flex: 1; padding: 1rem; font-size: 1.1rem; font-weight: bold; color: white; background-color: var(--primary-color); border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; }
    button:hover { background-color: var(--primary-light); }

    .confirmation { text-align: center; display: none; padding: 2rem; }
    .confirmation i { font-size: 4rem; color: var(--primary-color); margin-bottom: 1.5rem; }
  </style>
</head>

<body>
  <div class="container">
    <h1>Tutor Application</h1>
    <p>Join our team of dedicated educators and help students succeed.</p>

    <form id="tutorApplicationForm">
      <!-- Section 1 -->
      <div class="form-section" id="section1">
        <h2>Personal Information</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="firstName" class="required">First Name</label>
            <input type="text" id="firstName" name="firstName" required>
            <div class="error-message" id="firstNameError"></div>
          </div>
          <div class="form-group">
            <label for="lastName" class="required">Last Name</label>
            <input type="text" id="lastName" name="lastName" required>
            <div class="error-message" id="lastNameError"></div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="email" class="required">Email Address</label>
            <input type="email" id="email" name="email" required>
            <div class="error-message" id="emailError"></div>
          </div>
          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" name="phone">
            <div class="error-message" id="phoneError"></div>
          </div>
        </div>
        <div class="button-container">
          <button type="button" class="next">Next</button>
        </div>
      </div>

      <!-- Section 2 -->
      <div class="form-section" id="section2" style="display:none;">
        <h2>Academic Qualifications</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="degree" class="required">Highest Degree</label>
            <select id="degree" name="degree" required>
              <option value="">Select your highest degree</option>
              <option value="High School">High School Diploma</option>
              <option value="Associate">Associate Degree</option>
              <option value="Bachelor">Bachelor's Degree</option>
              <option value="Master">Master's Degree</option>
              <option value="Doctorate">Doctorate</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label for="fieldOfStudy" class="required">Field of Study</label>
            <input type="text" id="fieldOfStudy" name="fieldOfStudy" required>
          </div>
        </div>
        <div class="form-group">
          <label for="university" class="required">University / Institution</label>
          <input type="text" id="university" name="university" required>
        </div>
        <div class="form-group">
          <label for="subjects" class="required">Subjects You Can Tutor</label>
          <textarea id="subjects" name="subjects" rows="4" required></textarea>
        </div>
        <div class="button-container">
          <button type="button" class="prev">Previous</button>
          <button type="button" class="next">Next</button>
        </div>
      </div>

      <!-- Section 3 -->
      <div class="form-section" id="section3" style="display:none;">
        <h2>Experience & Preferences</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="experience">Years of Tutoring Experience</label>
            <input type="number" id="experience" name="experience" min="0" max="50">
          </div>
          <div class="form-group">
            <label class="required">Preferred Age Groups</label>
            <div class="checkbox-group">
              <label><input type="checkbox" name="ageGroups" value="Elementary">Elementary (K-5)</label>
              <label><input type="checkbox" name="ageGroups" value="Middle">Middle School (6-8)</label>
              <label><input type="checkbox" name="ageGroups" value="High">High School (9-12)</label>
              <label><input type="checkbox" name="ageGroups" value="College">College/University</label>
            </div>
            <div class="error-message" id="ageGroupsError"></div>
          </div>
        </div>
        <div class="form-group">
          <label for="resumeLink" class="required">Link to Resume / CV</label>
          <input type="url" id="resumeLink" name="resumeLink" required>
        </div>
        <div class="form-group">
          <label for="additionalMessage">Additional Message (Optional)</label>
          <textarea id="additionalMessage" name="additionalMessage" rows="3"></textarea>
        </div>
        <div class="button-container">
          <button type="button" class="prev">Previous</button>
          <button type="submit">Submit Application</button>
        </div>
      </div>
    </form>

    <div class="confirmation" id="confirmation">
      <i class="fas fa-check-circle"></i>
      <h2>Application Submitted Successfully!</h2>
      <p>Thank you for applying. We'll review your application and get back to you shortly.</p>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const form = document.getElementById('tutorApplicationForm');
      const sections = document.querySelectorAll('.form-section');
      let currentSection = 0;

      function showSection(index) {
        sections[currentSection].style.display = 'none';
        sections[index].style.display = 'block';
        currentSection = index;
      }

      document.querySelectorAll('.next').forEach(btn => {
        btn.addEventListener('click', () => showSection(currentSection + 1));
      });
      document.querySelectorAll('.prev').forEach(btn => {
        btn.addEventListener('click', () => showSection(currentSection - 1));
      });

      form.addEventListener('submit', async function (e) {
        e.preventDefault();

        const ageGroups = Array.from(form.querySelectorAll('input[name="ageGroups"]:checked')).map(cb => cb.value);
        if (ageGroups.length === 0) {
          document.getElementById('ageGroupsError').textContent = 'Please select at least one age group';
          return;
        }

        const data = {
          firstName: form.firstName.value.trim(),
          lastName: form.lastName.value.trim(),
          email: form.email.value.trim(),
          phone: form.phone.value.trim(),
          degree: form.degree.value,
          fieldOfStudy: form.fieldOfStudy.value.trim(),
          university: form.university.value.trim(),
          subjects: form.subjects.value.trim(),
          experience: form.experience.value,
          ageGroups: ageGroups,
          resumeLink: form.resumeLink.value.trim(),
          additionalMessage: form.additionalMessage.value.trim(),
          submittedAt: firebase.firestore.FieldValue.serverTimestamp()
        };

        try {
          const docRef = db.collection('Job_Applications').doc(Date.now().toString());
          await docRef.set(data);
          form.style.display = 'none';
          document.getElementById('confirmation').style.display = 'block';
          form.reset();
        } catch (err) {
          console.error('Error saving application:', err);
          alert('Failed to submit application. Please try again.');
        }
      });
    });
  </script>
</body>
</html>
