<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Section 2.9 – Derivatives of Inverse Functions</title>

  <script src="https://tklesson.com/resources-loader.js"></script>
  <script>loadCommonResources();</script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    * { box-sizing: border-box; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      line-height: 1.6;
      background: #ffffff;
      color: #00274d;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    #header-placeholder, #footer-placeholder { width: 100%; }

    .page-container { display: flex; flex-grow: 1; }

    .sidebar {
      width: 250px;
      background: #00274d;
      color: white;
      padding: 20px;
      flex-shrink: 0;
      overflow-y: auto;
      max-height: 100vh;
    }

    .sidebar h3 { color: white; margin-top: 0; }
    .sidebar ul { list-style-type: none; padding: 0; }
    .sidebar ul li a {
      display: block;
      padding: 10px;
      color: #c0c0c0;
      text-decoration: none;
      border-bottom: 1px solid #0056b3;
    }
    .sidebar ul li a:hover { background: #0056b3; color: white; }
    .sidebar ul li a.active { background: #0056b3; color: white; font-weight: bold; }

    header {
      background: #00274d;
      color: white;
      padding: 20px;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    header img { height: 50px; flex-shrink: 0; }
    header h1 {
      margin: 0;
      font-size: 1.8em;
      color: white;
      text-align: center;
      flex-grow: 1;
      flex-shrink: 1;
      min-width: 0;
      padding: 0 10px;
    }
    header a.home-link {
      color: white;
      text-decoration: none;
      font-size: 1em;
      background: #0056b3;
      padding: 6px 12px;
      border-radius: 6px;
      flex-shrink: 0;
    }
    header a.home-link:hover { background: #0073e6; }

    .footer {
      background: #00274d;
      color: white;
      text-align: center;
      padding: 20px;
      width: 100%;
      flex-shrink: 0;
    }

    .main-content { flex-grow: 1; }
    .container { padding: 20px; max-width: 900px; margin: auto; }

    h2 { color: #0056b3; border-bottom: 2px solid #0056b3; padding-bottom: 5px; }
    h3 { color: #0056b3; }

    .nav-buttons { display: flex; justify-content: space-between; margin: 30px auto; }
    .nav-btn {
      background: #0056b3;
      color: white;
      padding: 12px 25px;
      border-radius: 8px;
      text-decoration: none;
      font-size: 1.1em;
    }
    .nav-btn:hover { background: #0073e6; }

    .example, .tip, .check, .definition, .key-concept, .ap-exam-tip, .worked-example, .real-world-app, .practice-problem, .rule-box {
      background: #f0f8ff;
      border-left: 5px solid #0056b3;
      padding: 15px;
      margin: 15px 0;
      border-radius: 8px;
    }
    
    .rule-box { border-left-color: #28a745; background: #e8f5e8; }
    .worked-example { border-left-color: #28a745; }
    .practice-problem { border-left-color: #ff6b35; }
    .real-world-app { border-left-color: #ff6b35; }
    .definition { border-left-color: #28a745; }
    .key-concept { border-left-color: #ffc107; }
    .ap-exam-tip { border-left-color: #dc3545; }
    
    .check p { font-size: 1.2em; }

    .solution {
      display: none;
      background: #e6f2ff;
      border: 1px solid #0056b3;
      padding: 15px;
      margin-top: 10px;
      border-radius: 6px;
    }

    .show-solution-btn {
      background: #0056b3;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }
    .show-solution-btn:hover { background: #0073e6; }
    
    .interactive-widget {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 15px;
      margin: 20px 0;
    }
    
    .interactive-controls {
      display: flex;
      gap: 10px;
      margin: 10px 0;
      flex-wrap: wrap;
    }
    
    .interactive-controls input, .interactive-controls button, .interactive-controls select {
      padding: 8px 12px;
      border: 1px solid #ced4da;
      border-radius: 4px;
    }
    
    .interactive-controls button {
      background: #0056b3;
      color: white;
      cursor: pointer;
      border: none;
    }
    
    .interactive-controls button:hover {
      background: #0073e6;
    }
    
    .interactive-result {
      margin-top: 15px;
      padding: 15px;
      background: #e9ecef;
      border-radius: 4px;
    }
    
    .learning-objectives {
      background: #e7f3ff;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
    }
    
    .learning-objectives h3 {
      margin-top: 0;
    }
    
    .learning-objectives ul {
      padding-left: 20px;
    }
    
    .learning-objectives li {
      margin-bottom: 8px;
    }
    
    .table-container {
      overflow-x: auto;
      margin: 20px 0;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th, td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    
    th {
      background-color: #0056b3;
      color: white;
    }
    
    tr:nth-child(even) {
      background-color: #f2f2f2;
    }
    
    .progress-container {
      margin: 20px 0;
      background: #f1f1f1;
      border-radius: 8px;
      height: 10px;
    }
    
    .progress-bar {
      height: 100%;
      background: #0056b3;
      border-radius: 8px;
      width: 0%;
      transition: width 0.5s ease-in-out;
    }
    
    .section-completion {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .section-completion button {
      background: #0056b3;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 6px;
      cursor: pointer;
    }
    
    .section-completion button:hover {
      background: #0073e6;
    }
    
    .step-by-step {
      margin: 15px 0;
      padding-left: 20px;
    }
    
    .step {
      margin-bottom: 10px;
      position: relative;
    }
    
    .step-number {
      position: absolute;
      left: -20px;
      background: #0056b3;
      color: white;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8em;
    }
    
    .example-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .example-type {
      background: #0056b3;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.8em;
    }
    
    .problem-set {
      display: grid;
      gap: 20px;
      margin: 25px 0;
    }
    
    .problem-card {
      background: white;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .problem-card h4 {
      margin-top: 0;
      color: #0056b3;
      border-bottom: 1px solid #e9ecef;
      padding-bottom: 10px;
    }
    
    .difficulty-easy { border-left: 4px solid #28a745; }
    .difficulty-medium { border-left: 4px solid #ffc107; }
    .difficulty-hard { border-left: 4px solid #dc3545; }
    
    .quiz-container {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      margin: 25px 0;
    }
    
    .quiz-question {
      margin-bottom: 20px;
    }
    
    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 15px 0;
    }
    
    .quiz-option {
      padding: 10px;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .quiz-option:hover {
      background: #e9ecef;
    }
    
    .quiz-option.correct {
      background: #d4edda;
      border-color: #c3e6cb;
    }
    
    .quiz-option.incorrect {
      background: #f8d7da;
      border-color: #f5c6cb;
    }
    
    .quiz-feedback {
      margin-top: 10px;
      padding: 10px;
      border-radius: 4px;
      display: none;
    }
    
    .quiz-feedback.correct {
      background: #d4edda;
      border: 1px solid #c3e6cb;
      color: #155724;
    }
    
    .quiz-feedback.incorrect {
      background: #f8d7da;
      border: 1px solid #f5c6cb;
      color: #721c24;
    }
    
    .inverse-rule-box {
      text-align: center;
      font-size: 1.4em;
      margin: 20px 0;
      padding: 20px;
      background: linear-gradient(135deg, #e3f2fd, #bbdefb);
      border-radius: 8px;
      border: 2px solid #0056b3;
    }
    
    .inverse-properties {
      background: #e8f4f8;
      border: 1px solid #b8d8e8;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
    }
    
    .reflection-visual {
      text-align: center;
      margin: 20px 0;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    @media (max-width: 768px) {
      .page-container { flex-direction: column; }
      .sidebar { width: 100%; max-height: none; order: -1; }
      .interactive-controls { flex-direction: column; }
      .problem-set { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

  <script type="module" src="firebase-auth.js"></script>

  <div id="header-placeholder"></div>

  <div class="page-container">
    <div id="sidebar-placeholder"></div>

    <div class="main-content">
      <div class="container">
        <h2>2.9 – Derivatives of Inverse Functions</h2>
        
        <div class="learning-objectives">
          <h3>Learning Objectives</h3>
          <p>By the end of this section, you should be able to:</p>
          <ul>
            <li>Understand the relationship between a function and its inverse</li>
            <li>Apply the formula for the derivative of an inverse function</li>
            <li>Find derivatives of inverse trigonometric functions</li>
            <li>Use implicit differentiation to derive inverse function derivatives</li>
            <li>Solve problems involving slopes of inverse functions</li>
            <li>Apply the inverse function theorem to various function types</li>
          </ul>
        </div>
        
        <div class="section-completion">
          <span>Section Progress</span>
          <button id="mark-complete-btn">Mark as Complete</button>
        </div>
        <div class="progress-container">
          <div class="progress-bar" id="progress-bar"></div>
        </div>

        <div class="definition">
          <h3>Understanding Inverse Functions</h3>
          <p>If \( f \) and \( g \) are inverse functions, then:</p>
          <ul>
            <li>\( f(g(x)) = x \) for all x in the domain of g</li>
            <li>\( g(f(x)) = x \) for all x in the domain of f</li>
            <li>The graphs of f and g are reflections across the line \( y = x \)</li>
          </ul>
          <p><strong>Notation:</strong> If \( f \) and \( g \) are inverses, we write \( g = f^{-1} \)</p>
        </div>

        <div class="inverse-rule-box">
          <h3>The Inverse Function Theorem</h3>
          <p>If \( f \) is differentiable and has an inverse function \( f^{-1} \), then:</p>
          <p>\[ \frac{d}{dx}[f^{-1}(x)] = \frac{1}{f'(f^{-1}(x))} \]</p>
          <p><strong>In words:</strong> The derivative of the inverse function is the reciprocal of the derivative of the original function, evaluated at the corresponding point.</p>
        </div>

        <div class="inverse-properties">
          <h3>Key Insight: Reciprocal Relationship</h3>
          <p>If \( (a, b) \) is a point on \( f \), then \( (b, a) \) is a point on \( f^{-1} \).</p>
          <p>The slopes at these corresponding points are reciprocals:</p>
          <p>\[ f'(a) = m \quad \Rightarrow \quad (f^{-1})'(b) = \frac{1}{m} \]</p>
          <p>This makes geometric sense because reflection across \( y = x \) transforms slope \( m \) to slope \( \frac{1}{m} \).</p>
        </div>

        <div class="interactive-widget">
          <h3>Inverse Derivative Calculator</h3>
          <p>Explore the relationship between a function and its inverse derivative:</p>
          <div class="interactive-controls">
            <select id="function-type">
              <option value="linear">Linear Function</option>
              <option value="quadratic">Quadratic Function</option>
              <option value="cubic">Cubic Function</option>
              <option value="exponential">Exponential Function</option>
            </select>
            <input type="number" id="x-value" placeholder="x-value" step="0.1" value="2">
            <button id="calculate-inverse-derivative">Calculate</button>
          </div>
          <div class="interactive-result" id="inverse-result">
            <div id="inverse-solution"></div>
          </div>
        </div>

        <h2>Worked Examples</h2>
        
        <div class="worked-example">
          <div class="example-header">
            <h3>Example 1: Linear Function Inverse</h3>
            <span class="example-type">Basic Application</span>
          </div>
          <p><strong>Problem:</strong> Let \( f(x) = 2x + 3 \). Find the derivative of \( f^{-1}(x) \) at \( x = 7 \).</p>
          
          <div class="step-by-step">
            <div class="step">
              <div class="step-number">1</div>
              <p><strong>Find the point on f corresponding to x = 7 on f⁻¹:</strong></p>
              <p>Since \( f^{-1}(7) \) is some value a where \( f(a) = 7 \):</p>
              <p>\[ 2a + 3 = 7 \Rightarrow 2a = 4 \Rightarrow a = 2 \]</p>
              <p>So \( f^{-1}(7) = 2 \)</p>
            </div>
            
            <div class="step">
              <div class="step-number">2</div>
              <p><strong>Find f'(x):</strong></p>
              <p>\[ f'(x) = 2 \]</p>
            </div>
            
            <div class="step">
              <div class="step-number">3</div>
              <p><strong>Apply the inverse function theorem:</strong></p>
              <p>\[ (f^{-1})'(7) = \frac{1}{f'(f^{-1}(7))} = \frac{1}{f'(2)} = \frac{1}{2} \]</p>
            </div>
            
            <div class="step">
              <div class="step-number">4</div>
              <p><strong>Verification:</strong></p>
              <p>Find \( f^{-1}(x) \) explicitly: \( y = 2x + 3 \Rightarrow x = \frac{y - 3}{2} \Rightarrow f^{-1}(x) = \frac{x - 3}{2} \)</p>
              <p>\[ (f^{-1})'(x) = \frac{1}{2} \Rightarrow (f^{-1})'(7) = \frac{1}{2} \] ✓</p>
            </div>
          </div>
        </div>
        
        <div class="worked-example">
          <div class="example-header">
            <h3>Example 2: Quadratic Function Inverse</h3>
            <span class="example-type">Restricted Domain</span>
          </div>
          <p><strong>Problem:</strong> Let \( f(x) = x^2 \) for \( x \geq 0 \). Find \( (f^{-1})'(4) \).</p>
          
          <div class="step-by-step">
            <div class="step">
              <div class="step-number">1</div>
              <p><strong>Find the corresponding point:</strong></p>
              <p>We need \( f^{-1}(4) \):</p>
              <p>\[ f(a) = 4 \Rightarrow a^2 = 4 \Rightarrow a = 2 \] (since \( x \geq 0 \))</p>
              <p>So \( f^{-1}(4) = 2 \)</p>
            </div>
            
            <div class="step">
              <div class="step-number">2</div>
              <p><strong>Find f'(x):</strong></p>
              <p>\[ f'(x) = 2x \]</p>
            </div>
            
            <div class="step">
              <div class="step-number">3</div>
              <p><strong>Apply the theorem:</strong></p>
              <p>\[ (f^{-1})'(4) = \frac{1}{f'(f^{-1}(4))} = \frac{1}{f'(2)} = \frac{1}{2 \cdot 2} = \frac{1}{4} \]</p>
            </div>
            
            <div class="step">
              <div class="step-number">4</div>
              <p><strong>Verification:</strong></p>
              <p>\( f^{-1}(x) = \sqrt{x} \) for \( x \geq 0 \)</p>
              <p>\[ (f^{-1})'(x) = \frac{1}{2\sqrt{x}} \Rightarrow (f^{-1})'(4) = \frac{1}{2\sqrt{4}} = \frac{1}{4} \] ✓</p>
            </div>
          </div>
        </div>
        
        <div class="worked-example">
          <div class="example-header">
            <h3>Example 3: Using Implicit Differentiation</h3>
            <span class="example-type">Alternative Method</span>
          </div>
          <p><strong>Problem:</strong> Derive the formula for the derivative of \( \ln(x) \) using the fact that it's the inverse of \( e^x \).</p>
          
          <div class="step-by-step">
            <div class="step">
              <div class="step-number">1</div>
              <p><strong>Set up the inverse relationship:</strong></p>
              <p>Let \( y = \ln(x) \). Then by definition of inverse:</p>
              <p>\[ e^y = x \]</p>
            </div>
            
            <div class="step">
              <div class="step-number">2</div>
              <p><strong>Differentiate both sides implicitly:</strong></p>
              <p>\[ \frac{d}{dx}[e^y] = \frac{d}{dx}[x] \]</p>
              <p>\[ e^y \cdot \frac{dy}{dx} = 1 \]</p>
            </div>
            
            <div class="step">
              <div class="step-number">3</div>
              <p><strong>Solve for \( \frac{dy}{dx} \):</strong></p>
              <p>\[ \frac{dy}{dx} = \frac{1}{e^y} \]</p>
            </div>
            
            <div class="step">
              <div class="step-number">4</div>
              <p><strong>Substitute back using \( y = \ln(x) \):</strong></p>
              <p>\[ \frac{dy}{dx} = \frac{1}{e^{\ln(x)}} = \frac{1}{x} \]</p>
              <p>Thus, \( \frac{d}{dx}[\ln(x)] = \frac{1}{x} \)</p>
            </div>
          </div>
        </div>

        <div class="key-concept">
          <h3>Derivatives of Common Inverse Functions</h3>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Function</th>
                  <th>Inverse Function</th>
                  <th>Derivative of Inverse</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>\( f(x) = x^2 \) (x ≥ 0)</td>
                  <td>\( f^{-1}(x) = \sqrt{x} \)</td>
                  <td>\( (f^{-1})'(x) = \frac{1}{2\sqrt{x}} \)</td>
                </tr>
                <tr>
                  <td>\( f(x) = e^x \)</td>
                  <td>\( f^{-1}(x) = \ln(x) \)</td>
                  <td>\( (f^{-1})'(x) = \frac{1}{x} \)</td>
                </tr>
                <tr>
                  <td>\( f(x) = \sin(x) \) (\( -\frac{\pi}{2} \leq x \leq \frac{\pi}{2} \))</td>
                  <td>\( f^{-1}(x) = \arcsin(x) \)</td>
                  <td>\( (f^{-1})'(x) = \frac{1}{\sqrt{1-x^2}} \)</td>
                </tr>
                <tr>
                  <td>\( f(x) = \cos(x) \) (\( 0 \leq x \leq \pi \))</td>
                  <td>\( f^{-1}(x) = \arccos(x) \)</td>
                  <td>\( (f^{-1})'(x) = -\frac{1}{\sqrt{1-x^2}} \)</td>
                </tr>
                <tr>
                  <td>\( f(x) = \tan(x) \) (\( -\frac{\pi}{2} < x < \frac{\pi}{2} \))</td>
                  <td>\( f^{-1}(x) = \arctan(x) \)</td>
                  <td>\( (f^{-1})'(x) = \frac{1}{1+x^2} \)</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="interactive-widget">
          <h3>Inverse Function Practice</h3>
          <p>Test your understanding with these problems:</p>
          <div class="interactive-controls">
            <button id="generate-inverse-problem">New Problem</button>
            <button id="show-hint">Show Hint</button>
            <button id="show-solution">Show Solution</button>
          </div>
          <div class="interactive-result" id="practice-area">
            <div id="problem-display"></div>
            <div id="hint-area" style="display: none; margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 4px;"></div>
            <div id="solution-area" style="display: none; margin-top: 10px;"></div>
          </div>
        </div>

        <h2>Common Mistakes to Avoid</h2>
        
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Mistake</th>
                <th>Why It's Wrong</th>
                <th>Correct Approach</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>\( (f^{-1})'(x) = \frac{1}{f'(x)} \)</td>
                <td>Uses x instead of f⁻¹(x) in denominator</td>
                <td>\( (f^{-1})'(x) = \frac{1}{f'(f^{-1}(x))} \)</td>
              </tr>
              <tr>
                <td>Forgetting domain restrictions</td>
                <td>Applies to functions that aren't one-to-one</td>
                <td>Always check if function is one-to-one on the domain</td>
              </tr>
              <tr>
                <td>Confusing f⁻¹(x) with 1/f(x)</td>
                <td>Inverse function ≠ reciprocal</td>
                <td>Remember: f⁻¹ means functional inverse, not 1/f(x)</td>
              </tr>
              <tr>
                <td>Not finding the correct corresponding point</td>
                <td>Uses wrong evaluation point</td>
                <td>Always find f⁻¹(x) first, then evaluate f' there</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="quiz-container">
          <h3>Quick Concept Check</h3>
          
          <div class="quiz-question">
            <p><strong>Question 1:</strong> If \( f(2) = 5 \) and \( f'(2) = 3 \), what is \( (f^{-1})'(5) \)?</p>
            <div class="quiz-options">
              <div class="quiz-option" onclick="checkAnswer(this, 'correct')">\( \frac{1}{3} \)</div>
              <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">\( 3 \)</div>
              <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">\( \frac{1}{5} \)</div>
              <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">\( 5 \)</div>
            </div>
            <div class="quiz-feedback correct">✓ Correct! \( (f^{-1})'(5) = \frac{1}{f'(f^{-1}(5))} = \frac{1}{f'(2)} = \frac{1}{3} \)</div>
            <div class="quiz-feedback incorrect">✗ Remember the formula: \( (f^{-1})'(x) = \frac{1}{f'(f^{-1}(x))} \)</div>
          </div>
          
          <div class="quiz-question">
            <p><strong>Question 2:</strong> What is the derivative of \( \arcsin(x) \)?</p>
            <div class="quiz-options">
              <div class="quiz-option" onclick="checkAnswer(this, 'correct')">\( \frac{1}{\sqrt{1-x^2}} \)</div>
              <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">\( \frac{1}{1+x^2} \)</div>
              <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">\( -\frac{1}{\sqrt{1-x^2}} \)</div>
              <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">\( \sqrt{1-x^2} \)</div>
            </div>
            <div class="quiz-feedback correct">✓ Correct! This is a standard inverse trig derivative.</div>
            <div class="quiz-feedback incorrect">✗ Remember: arcsin'(x) = 1/√(1-x²), arccos'(x) = -1/√(1-x²), arctan'(x) = 1/(1+x²)</div>
          </div>
        </div>

        <div class="tip">
          <h3>Problem-Solving Strategy for Inverse Derivatives</h3>
          <ol>
            <li><strong>Identify</strong> the point on the inverse function</li>
            <li><strong>Find</strong> the corresponding point on the original function</li>
            <li><strong>Calculate</strong> the derivative of the original function</li>
            <li><strong>Apply</strong> the inverse function theorem formula</li>
            <li><strong>Verify</strong> your answer makes sense geometrically</li>
          </ol>
        </div>
        
        <div class="ap-exam-tip">
          <h3>AP Exam Tip</h3>
          <p>Inverse function derivatives frequently appear on AP Calculus exams. Remember to:</p>
          <ul>
            <li>Memorize the derivatives of inverse trigonometric functions</li>
            <li>Show the step of finding the corresponding point</li>
            <li>Use the correct formula: \( (f^{-1})'(x) = \frac{1}{f'(f^{-1}(x))} \)</li>
            <li>Check domain restrictions for inverse functions</li>
            <li>Practice both the theorem and implicit differentiation methods</li>
          </ul>
        </div>

        <h2>Practice Problems</h2>
        
        <div class="problem-set">
          <div class="problem-card difficulty-medium">
            <h4>Problem 1: Cubic Function Inverse</h4>
            <p>Let \( f(x) = x^3 + 1 \). Find \( (f^{-1})'(9) \).</p>
            <button class="show-solution-btn" onclick="toggleSolution(this)">Show Solution</button>
            <div class="solution">
              <p><strong>Step 1:</strong> Find \( f^{-1}(9) \):</p>
              <p>\( f(a) = 9 \Rightarrow a^3 + 1 = 9 \Rightarrow a^3 = 8 \Rightarrow a = 2 \)</p>
              <p>So \( f^{-1}(9) = 2 \)</p>
              
              <p><strong>Step 2:</strong> Find \( f'(x) \):</p>
              <p>\( f'(x) = 3x^2 \)</p>
              
              <p><strong>Step 3:</strong> Apply the theorem:</p>
              <p>\( (f^{-1})'(9) = \frac{1}{f'(f^{-1}(9))} = \frac{1}{f'(2)} = \frac{1}{3(2)^2} = \frac{1}{12} \)</p>
            </div>
          </div>
          
          <div class="problem-card difficulty-hard">
            <h4>Problem 2: Exponential Inverse</h4>
            <p>Let \( f(x) = e^{2x} \). Find \( (f^{-1})'(1) \).</p>
            <button class="show-solution-btn" onclick="toggleSolution(this)">Show Solution</button>
            <div class="solution">
              <p><strong>Step 1:</strong> Find \( f^{-1}(1) \):</p>
              <p>\( f(a) = 1 \Rightarrow e^{2a} = 1 \Rightarrow 2a = \ln(1) = 0 \Rightarrow a = 0 \)</p>
              <p>So \( f^{-1}(1) = 0 \)</p>
              
              <p><strong>Step 2:</strong> Find \( f'(x) \):</p>
              <p>\( f'(x) = 2e^{2x} \)</p>
              
              <p><strong>Step 3:</strong> Apply the theorem:</p>
              <p>\( (f^{-1})'(1) = \frac{1}{f'(f^{-1}(1))} = \frac{1}{f'(0)} = \frac{1}{2e^{0}} = \frac{1}{2} \)</p>
            </div>
          </div>
          
          <div class="problem-card difficulty-hard">
            <h4>Problem 3: Using Implicit Differentiation</h4>
            <p>Use implicit differentiation to find the derivative of \( y = \arctan(x) \).</p>
            <button class="show-solution-btn" onclick="toggleSolution(this)">Show Solution</button>
            <div class="solution">
              <p><strong>Step 1:</strong> Set up the inverse relationship:</p>
              <p>\( y = \arctan(x) \Rightarrow \tan(y) = x \)</p>
              
              <p><strong>Step 2:</strong> Differentiate both sides:</p>
              <p>\( \frac{d}{dx}[\tan(y)] = \frac{d}{dx}[x] \)</p>
              <p>\( \sec^2(y) \cdot \frac{dy}{dx} = 1 \)</p>
              
              <p><strong>Step 3:</strong> Solve for \( \frac{dy}{dx} \):</p>
              <p>\( \frac{dy}{dx} = \frac{1}{\sec^2(y)} = \cos^2(y) \)</p>
              
              <p><strong>Step 4:</strong> Express in terms of x:</p>
              <p>Since \( \tan(y) = x \), we have a right triangle with opposite = x, adjacent = 1, hypotenuse = \( \sqrt{1+x^2} \)</p>
              <p>\( \cos(y) = \frac{1}{\sqrt{1+x^2}} \Rightarrow \cos^2(y) = \frac{1}{1+x^2} \)</p>
              <p>Thus, \( \frac{d}{dx}[\arctan(x)] = \frac{1}{1+x^2} \)</p>
            </div>
          </div>
        </div>

        <div class="nav-buttons">
          <a href="Ch2_Sec2.8_apcalc_txb.html" class="nav-btn">Back ⬅ Section 2.8</a>
          <a href="Ch2_Sec2.10_apcalc_txb.html" class="nav-btn">Next ➡ Section 2.10</a>
        </div>
      </div>
    </div>
  </div>

  <div id="footer-placeholder"></div>

  <script>
    function toggleSolution(button) {
      const solution = button.nextElementSibling;
      if (solution.style.display === "none" || solution.style.display === "") {
        solution.style.display = "block";
        button.textContent = "Hide Solution";
      } else {
        solution.style.display = "none";
        button.textContent = "Show Solution";
      }
    }
    
    // Quiz functionality
    function checkAnswer(option, result) {
      const options = option.parentElement.children;
      const feedback = option.parentElement.nextElementSibling;
      const nextFeedback = feedback.nextElementSibling;
      
      // Remove all classes first
      for (let opt of options) {
        opt.classList.remove('correct', 'incorrect');
      }
      
      // Show appropriate feedback
      if (result === 'correct') {
        option.classList.add('correct');
        feedback.style.display = 'block';
        nextFeedback.style.display = 'none';
      } else {
        option.classList.add('incorrect');
        feedback.style.display = 'none';
        nextFeedback.style.display = 'block';
        
        // Find and highlight correct answer
        for (let opt of options) {
          if (opt.textContent.includes('\\frac{1}{3}') || opt.textContent.includes('\\frac{1}{\\sqrt{1-x^2}}')) {
            opt.classList.add('correct');
          }
        }
      }
    }

    // Inverse Derivative Calculator
    document.getElementById('calculate-inverse-derivative').addEventListener('click', function() {
      const functionType = document.getElementById('function-type').value;
      const xValue = parseFloat(document.getElementById('x-value').value);
      const solutionElement = document.getElementById('inverse-solution');
      
      if (isNaN(xValue)) {
        solutionElement.innerHTML = 'Please enter a valid x-value.';
        return;
      }
      
      let solutionHTML = '';
      
      switch(functionType) {
        case 'linear':
          // f(x) = 2x + 3
          const a = (xValue - 3) / 2;
          solutionHTML = `
            <p><strong>Function:</strong> \( f(x) = 2x + 3 \)</p>
            <p><strong>Find</strong> \( (f^{-1})'(${xValue}) \)</p>
            <p><strong>Step 1:</strong> Find \( f^{-1}(${xValue}) \):</p>
            <p>\( f(a) = ${xValue} \Rightarrow 2a + 3 = ${xValue} \Rightarrow 2a = ${xValue - 3} \Rightarrow a = ${a} \)</p>
            <p><strong>Step 2:</strong> Find \( f'(x) = 2 \)</p>
            <p><strong>Step 3:</strong> Apply the theorem:</p>
            <p>\( (f^{-1})'(${xValue}) = \\frac{1}{f'(f^{-1}(${xValue}))} = \\frac{1}{f'(${a})} = \\frac{1}{2} \)</p>
            <p><strong>Verification:</strong> \( f^{-1}(x) = \\frac{x - 3}{2} \Rightarrow (f^{-1})'(x) = \\frac{1}{2} \)</p>
          `;
          break;
          
        case 'quadratic':
          // f(x) = x² for x ≥ 0
          if (xValue < 0) {
            solutionHTML = '<p>For f(x) = x² (x ≥ 0), x-value must be ≥ 0.</p>';
          } else {
            const a = Math.sqrt(xValue);
            solutionHTML = `
              <p><strong>Function:</strong> \( f(x) = x^2 \) (x ≥ 0)</p>
              <p><strong>Find</strong> \( (f^{-1})'(${xValue}) \)</p>
              <p><strong>Step 1:</strong> Find \( f^{-1}(${xValue}) \):</p>
              <p>\( f(a) = ${xValue} \Rightarrow a^2 = ${xValue} \Rightarrow a = ${a} \) (since a ≥ 0)</p>
              <p><strong>Step 2:</strong> Find \( f'(x) = 2x \)</p>
              <p><strong>Step 3:</strong> Apply the theorem:</p>
              <p>\( (f^{-1})'(${xValue}) = \\frac{1}{f'(f^{-1}(${xValue}))} = \\frac{1}{f'(${a})} = \\frac{1}{2 \\cdot ${a}} = \\frac{1}{${2*a}} \)</p>
              <p><strong>Verification:</strong> \( f^{-1}(x) = \\sqrt{x} \Rightarrow (f^{-1})'(x) = \\frac{1}{2\\sqrt{x}} = \\frac{1}{${2*a}} \)</p>
            `;
          }
          break;
          
        case 'cubic':
          // f(x) = x³
          const aCubic = Math.cbrt(xValue);
          solutionHTML = `
            <p><strong>Function:</strong> \( f(x) = x^3 \)</p>
            <p><strong>Find</strong> \( (f^{-1})'(${xValue}) \)</p>
            <p><strong>Step 1:</strong> Find \( f^{-1}(${xValue}) \):</p>
            <p>\( f(a) = ${xValue} \Rightarrow a^3 = ${xValue} \Rightarrow a = ${aCubic.toFixed(4)} \)</p>
            <p><strong>Step 2:</strong> Find \( f'(x) = 3x^2 \)</p>
            <p><strong>Step 3:</strong> Apply the theorem:</p>
            <p>\( (f^{-1})'(${xValue}) = \\frac{1}{f'(f^{-1}(${xValue}))} = \\frac{1}{f'(${aCubic.toFixed(4)})} = \\frac{1}{3 \\cdot (${aCubic.toFixed(4)})^2} = \\frac{1}{${(3 * aCubic * aCubic).toFixed(4)}} \)</p>
          `;
          break;
          
        case 'exponential':
          // f(x) = e^x
          const aExp = Math.log(xValue);
          solutionHTML = `
            <p><strong>Function:</strong> \( f(x) = e^x \)</p>
            <p><strong>Find</strong> \( (f^{-1})'(${xValue}) \)</p>
            <p><strong>Step 1:</strong> Find \( f^{-1}(${xValue}) \):</p>
            <p>\( f(a) = ${xValue} \Rightarrow e^a = ${xValue} \Rightarrow a = \\ln(${xValue}) = ${aExp.toFixed(4)} \)</p>
            <p><strong>Step 2:</strong> Find \( f'(x) = e^x \)</p>
            <p><strong>Step 3:</strong> Apply the theorem:</p>
            <p>\( (f^{-1})'(${xValue}) = \\frac{1}{f'(f^{-1}(${xValue}))} = \\frac{1}{f'(${aExp.toFixed(4)})} = \\frac{1}{e^{${aExp.toFixed(4)}}} = \\frac{1}{${xValue}} \)</p>
            <p><strong>Verification:</strong> \( f^{-1}(x) = \\ln(x) \Rightarrow (f^{-1})'(x) = \\frac{1}{x} \)</p>
          `;
          break;
      }
      
      solutionElement.innerHTML = solutionHTML;
      
      // Re-render MathJax
      if (window.MathJax) {
        MathJax.typeset();
      }
    });

    // Practice Problem Generator
    const inverseProblems = [
      {
        problem: "Let \( f(x) = 3x - 2 \). Find \( (f^{-1})'(4) \).",
        hint: "First find f⁻¹(4), then apply the inverse function theorem",
        solution: "(f^{-1})'(4) = \\frac{1}{3}"
      },
      {
        problem: "Let \( f(x) = x^2 + 1 \) for \( x \\geq 0 \). Find \( (f^{-1})'(5) \).",
        hint: "Remember the domain restriction for the inverse to exist",
        solution: "(f^{-1})'(5) = \\frac{1}{4}"
      },
      {
        problem: "Let \( f(x) = e^{3x} \). Find \( (f^{-1})'(1) \).",
        hint: "Use the inverse function theorem with exponential functions",
        solution: "(f^{-1})'(1) = \\frac{1}{3}"
      }
    ];

    document.getElementById('generate-inverse-problem').addEventListener('click', function() {
      const randomIndex = Math.floor(Math.random() * inverseProblems.length);
      const problem = inverseProblems[randomIndex];
      
      document.getElementById('problem-display').innerHTML = `<p><strong>Problem:</strong> ${problem.problem}</p>`;
      document.getElementById('hint-area').innerHTML = `<strong>Hint:</strong> ${problem.hint}`;
      document.getElementById('solution-area').innerHTML = `<strong>Solution:</strong> \\[ ${problem.solution} \\]`;
      document.getElementById('hint-area').style.display = 'none';
      document.getElementById('solution-area').style.display = 'none';
      
      if (window.MathJax) {
        MathJax.typeset();
      }
    });

    document.getElementById('show-hint').addEventListener('click', function() {
      document.getElementById('hint-area').style.display = 'block';
    });

    document.getElementById('show-solution').addEventListener('click', function() {
      document.getElementById('solution-area').style.display = 'block';
      if (window.MathJax) {
        MathJax.typeset();
      }
    });
    
    // Progress tracking
    document.getElementById('mark-complete-btn').addEventListener('click', function() {
      const progressBar = document.getElementById('progress-bar');
      progressBar.style.width = '100%';
      this.textContent = 'Completed!';
      this.disabled = true;
      localStorage.setItem('section-2.9-completed', 'true');
    });
    
    // Load progress on page load
    document.addEventListener('DOMContentLoaded', function() {
      if (localStorage.getItem('section-2.9-completed')) {
        const progressBar = document.getElementById('progress-bar');
        progressBar.style.width = '100%';
        const button = document.getElementById('mark-complete-btn');
        button.textContent = 'Completed!';
        button.disabled = true;
      }
      
      // Generate initial practice problem
      document.getElementById('generate-inverse-problem').click();
    });

    async function loadComponent(url, elementId, pageTitle = null) {
      try {
        const response = await fetch(url, { cache: "no-store" });
        if (!response.ok) throw new Error(`Failed to load ${url}: ${response.status}`);
        const html = await response.text();
        const container = document.getElementById(elementId);
        if (!container) return;
        container.innerHTML = html;
        if (pageTitle && elementId === 'header-placeholder') {
          const titleEl = container.querySelector('#section-title') || container.querySelector('h1');
          if (titleEl) titleEl.textContent = pageTitle;
          document.title = pageTitle;
        }
      } catch (err) {
        console.error(err);
        const el = document.getElementById(elementId);
        if (el) el.innerHTML = `<p style="color:red;">Error loading component: ${url}</p>`;
      }
    }

    document.addEventListener('DOMContentLoaded', async () => {
      await loadComponent('textbookheader.html', 'header-placeholder', 'Section 2.9 – Derivatives of Inverse Functions');
      await loadComponent('textbooksidebar.html', 'sidebar-placeholder');
      await loadComponent('textbookfooter.html', 'footer-placeholder');

      const currentUrl = window.location.pathname.split('/').pop().split('?')[0];
      const links = document.querySelectorAll('#sidebar-placeholder a');
      links.forEach(link => {
        const linkUrl = link.getAttribute('href').split('?')[0];
        if (linkUrl === currentUrl) {
          link.classList.add('active');
          link.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      });
    });
  </script>

</body>
</html>
