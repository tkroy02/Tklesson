<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AP-Calculus Quiz 2 – Tklesson</title>

<link rel="canonical" href="https://tklesson.com/" />
<link rel="icon" type="image/png" sizes="16x16" href="/Tklesson1-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/Tklesson1-32x32.png">
<link rel="icon" type="image/png" sizes="48x48" href="/Tklesson1-48x48.png">
<link rel="icon" type="image/png" sizes="64x64" href="/Tklesson1-64x64.png">
<link rel="icon" type="image/png" sizes="192x192" href="/Tklesson1-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="/Tklesson1-512x512.png">
<link rel="apple-touch-icon" href="/Tklesson1-192x192.png">
<meta name="theme-color" content="#ffffff">

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-99H54WVS80"></script>
<script>
  window.addEventListener('load', function() {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-99H54WVS80');
  });
</script>

    
<style>
    body { font-family: Arial, sans-serif; background: #f0f8ff; margin:0; padding:0; }
    header { background: #01579b; color: white; padding: 15px; text-align: center; }
    header img { max-height: 60px; vertical-align: middle; margin-right: 10px; }
    h1 { display: inline; font-size: 2em; }
    h2 { font-size: 1.2em; font-weight: normal; color: #e1f5fe; margin-top: 5px; }
    .quiz-container { max-width: 900px; margin: 30px auto; padding: 25px; background: white; border-radius: 12px; box-shadow: 0 0 15px #555; }
    .question { margin-bottom: 20px; padding: 10px; border-radius: 8px; background: #e1f5fe; }
    .question p { font-weight: bold; }
    input[type="text"], input[type="email"] { width: 100%; padding: 6px; margin-top: 5px; border-radius: 4px; border: 1px solid #ccc; }
    button { background-color: #0288d1; color: white; padding: 10px 25px; border: none; cursor: pointer; font-size: 1em; border-radius: 5px; margin-top: 10px; margin-right: 10px; }
    button:hover { background-color: #01579b; }
    .correct { background-color: #c8e6c9; }
    .wrong { background-color: #ffcdd2; }
    #score { font-size: 1.3em; font-weight: bold; margin-top: 15px; }
    .timer { text-align: right; font-weight: bold; margin-bottom: 15px; }
    #viewSolBtn { display: none; background-color: #43a047; }
    #viewSolBtn:hover { background-color: #2e7d32; }
    .button-row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; margin-top: 6px; }
    .email-container { margin-bottom: 15px; }
</style>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>

<header>
    <img src="Tklesson1.png" alt="Tklesson Logo">
    <h1>AP-Calculus Quiz 2 – Tklesson</h1>
    <h2>Limits – Trigonometry & Conjugates</h2>
</header>

<div class="quiz-container">
    <div class="email-container">
        <label for="name">Enter your name (required):</label>
        <input type="text" id="name" placeholder="Your name">
    </div>
    <div class="email-container">
        <label for="email">Enter your email (required):</label>
        <input type="email" id="email" placeholder="you@example.com">
    </div>

    <div class="timer" id="timer">60:00</div>
    <div id="quiz-container"></div>

    <div class="button-row">
      <button type="button" id="submitBtn" onclick="checkAnswers()">Submit</button>
      <button type="button" id="restartBtn" onclick="restartQuiz()">Restart Quiz</button>
      <button type="button" id="viewSolBtn" onclick="viewSolutions()">View Solution Pack</button>
    </div>

    <div id="score"></div>
    <div id="submission-message" style="margin-top:10px; font-weight:bold; color:#01579b;"></div>
</div>

<script>
// === Questions for Quiz 2 ===
const questions = [
    {type:'fill', q:"\\(\\lim_{x \\to \\infty} \\frac{2x+1}{x}\\)", answer:["2"]},
    {type:'fill', q:"\\(\\lim_{x \\to \\infty} \\frac{3x^2+5}{x^2-1}\\)", answer:["3"]},
    {type:'fill', q:"\\(\\lim_{x \\to \\infty} \\frac{5x^3-2x}{2x^3+7}\\)", answer:["5/2","2.5"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{\\sin x}{x}\\)", answer:["1"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{1-\\cos x}{x}\\)", answer:["0"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{1-\\cos x}{x^2}\\)", answer:["1/2","0.5"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{\\tan x}{x}\\)", answer:["1"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{\\sin 3x}{5x}\\)", answer:["3/5","0.6"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{\\sin^2 x}{x}\\)", answer:["0"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{\\sin 2x}{\\sin 3x}\\)", answer:["2/3","0.6667"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{\\sin^3 x}{x^3}\\)", answer:["1"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{1-\\cos 2x}{x^2}\\)", answer:["2"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{\\tan 3x}{\\sin 2x}\\)", answer:["3/2","1.5"]},
    {type:'fill', q:"\\(\\lim_{x \\to \\frac{\\pi}{2}^-} \\tan x\\)", answer:["Infinity","+Infinity","+∞"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{\\sin x}{x} \\cdot \\frac{\\tan x}{x}\\)", answer:["1"]},
    {type:'fill', q:"\\(\\lim_{x \\to 4} \\frac{\\sqrt{x}-2}{x-4}\\)", answer:["1/4","0.25"]},
    {type:'fill', q:"\\(\\lim_{x \\to 9} \\frac{\\sqrt{x}-3}{x-9}\\)", answer:["1/6","0.1667"]},
    {type:'fill', q:"\\(\\lim_{x \\to 1} \\frac{\\sqrt{x+3}-2}{x-1}\\)", answer:["1/4","0.25"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{\\sqrt{1+x}-1}{x}\\)", answer:["1/2","0.5"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{1+x-1}{x}\\)", answer:["1"]}
];

// Shuffle helper
function shuffleArray(arr){ return arr.sort(() => Math.random() - 0.5); }
shuffleArray(questions);

const container = document.getElementById('quiz-container');

function renderQuiz(){
    container.innerHTML = '';
    questions.forEach((q, idx)=>{
        const div = document.createElement('div');
        div.classList.add('question');
        div.id = `qdiv${idx}`;
        div.innerHTML = `<p>${idx+1}. ${q.q}</p>
                         <input type="text" id="q${idx}" placeholder="Type your answer here">`;
        container.appendChild(div);
    });
    document.getElementById('score').innerText = '';
    document.getElementById('submission-message').textContent = '';
    document.getElementById('viewSolBtn').style.display = 'none';
    MathJax.typesetPromise();
}

function normalizeAns(s){
    return s.replace(/\s+/g,'').replace(/,+/g,'').toLowerCase();
}

async function checkAnswers(){
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const msgEl = document.getElementById('submission-message');
    msgEl.textContent = '';

    if(!nameInput.value.trim()){ msgEl.textContent="Name is required!"; nameInput.focus(); return; }
    if(!emailInput.value.trim()){ msgEl.textContent="Email is required!"; emailInput.focus(); return; }

    let score = 0;

    questions.forEach((q, idx)=>{
        const div = document.getElementById(`qdiv${idx}`);
        div.classList.remove('correct','wrong');
        const userAnsRaw = document.getElementById(`q${idx}`).value.trim();
        const userAns = normalizeAns(userAnsRaw);
        const answers = (Array.isArray(q.answer)? q.answer : [q.answer]).map(a=>normalizeAns(a.toString()));

        if(answers.includes(userAns)){
            div.classList.add('correct'); score++;
        } else {
            div.classList.add('wrong');
            div.querySelector('input').insertAdjacentHTML('afterend',
                `<p style="color:#01579b;margin-top:6px;">Correct answer: ${q.answer[0]}</p>`);
        }
    });

    document.getElementById('score').innerText = `Your score: ${score} / ${questions.length}`;
    document.getElementById('viewSolBtn').style.display = 'inline-block';

    // Submit score to backend
    try{
        const res = await fetch('https://myedu-backend.onrender.com/submit-quiz',{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify({
                name: nameInput.value.trim(),
                email: emailInput.value.trim(),
                score: score,
                total: questions.length
            })
        });
        const data = await res.json();
        msgEl.textContent = data.message || "Score submitted successfully!";
    } catch(err){
        console.error(err);
        msgEl.textContent = "Error sending score to server. Please try again later.";
    }
}

// === Anti-cheat restart ===
function restartQuiz(){
    shuffleArray(questions);
    renderQuiz();
    // Timer continues, cannot reset
}

// === Disable quiz on timeout ===
function disableQuiz(){
    const inputs = document.querySelectorAll('#quiz-container input[type="text"]');
    inputs.forEach(input => {
        input.disabled = true;
        input.style.backgroundColor = '#f0f0f0';
    });
    const restartBtn = document.getElementById('restartBtn');
    restartBtn.disabled = true;
    restartBtn.style.backgroundColor = '#cccccc';
    restartBtn.style.cursor = 'not-allowed';
}

// === Timer ===
let remaining = 60 * 60;
const timerEl = document.getElementById('timer');
function pad(n){ return n.toString().padStart(2,'0'); }

function updateTimer(){
    const min = Math.floor(remaining/60);
    const sec = remaining % 60;
    timerEl.textContent = `${pad(min)}:${pad(sec)}`;
    if(remaining <= 0){
        clearInterval(timerId);
        disableQuiz();
        alert('Time is up! Quiz is now disabled.');
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        if(nameInput.value.trim() && emailInput.value.trim()){
            checkAnswers();
        } else {
            document.getElementById('submission-message').textContent =
                'Time is up! Please enter your name and email, then click Submit to save your score.';
            document.getElementById('submission-message').style.color = 'red';
        }
        return;
    }
    remaining--;
}

// Start timer
const timerId = setInterval(updateTimer, 1000);

function viewSolutions(){
    window.open('quiz2_solution.html', '_blank');
}

renderQuiz();
</script>

</body>
</html>


