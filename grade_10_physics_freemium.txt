<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Physics Quiz – Tklesson</title>
<style>
    body { font-family: Arial, sans-serif; background: #f0f8ff; margin:0; padding:0; }
    header { background: #01579b; color: white; padding: 15px; text-align: center; }
    header img { max-height: 60px; vertical-align: middle; margin-right: 10px; }
    h1 { display: inline; font-size: 2em; }
    h2 { font-size: 1.2em; font-weight: normal; color: #e1f5fe; margin-top: 5px; }
    .quiz-container { max-width: 900px; margin: 30px auto; padding: 25px; background: white; border-radius: 12px; box-shadow: 0 0 15px #555; }
    .question { margin-bottom: 20px; padding: 10px; border-radius: 8px; background: #e1f5fe; }
    .question p { font-weight: bold; }
    .options label { display: block; margin-bottom: 5px; }
    input[type="text"], input[type="email"] { width: 100%; padding: 6px; margin-top: 5px; border-radius: 4px; border: 1px solid #ccc; }
    button { background-color: #0288d1; color: white; padding: 10px 25px; border: none; cursor: pointer; font-size: 1em; border-radius: 5px; margin-top: 10px; margin-right: 10px; }
    button:hover { background-color: #01579b; }
    .correct { background-color: #c8e6c9; }
    .wrong { background-color: #ffcdd2; }
    #score { font-size: 1.3em; font-weight: bold; margin-top: 15px; }
    .timer { text-align: right; font-weight: bold; margin-bottom: 15px; }
    .email-container { margin-bottom: 15px; }
    #submission-message { margin-top: 10px; font-weight: bold; color: #01579b; }

/* Prevent text selection for the quiz content */
.quiz-container, .question p, .options label {
    -webkit-user-select: none;  /* Chrome/Safari */
    -moz-user-select: none;     /* Firefox */
    -ms-user-select: none;      /* IE/Edge */
    user-select: none;          /* Standard */
}

/* Allow inputs to be selectable and editable */
.quiz-container input {
    user-select: text;
}

document.querySelector('.quiz-container').addEventListener('keydown', function(e){
    if (e.ctrlKey && e.key === 'a') {
        e.preventDefault(); // Disable Ctrl+A
    }
});


</style>
</head>
<body>

<header>
    <img src="Tklesson1.png" alt="Tklesson Logo">
    <h1>Grade 10 Physics Quiz 1 – Tklesson</h1>
    <h2>Work and Energy</h2>
</header>

<div class="quiz-container">
    <div class="email-container">
        <label for="name">Enter your name (required):</label>
        <input type="text" id="name" placeholder="Your name" required>
    </div>
    <div class="email-container">
        <label for="email">Enter your email (required):</label>
        <input type="email" id="email" placeholder="you@example.com" required>
    </div>
    <div class="timer" id="timer">45:00</div>
    <div id="quiz-container"></div>
    <div class="button-row">
        <button id="submitBtn" onclick="checkAnswers()">Submit</button>
        <button id="restartBtn" onclick="restartQuiz()">Restart Quiz</button>
    </div>
    <div id="score"></div>
    <div id="submission-message"></div>
</div>

<script>
const questions = [
    {type:'mcq', q:"A force of 10 N acts on an object causing a displacement of 5 m in the same direction as the force. How much work is done?", options:["50 J","5 J","15 J","0 J"], answer:"50 J"},
    {type:'fill', q:"On Earth, with mass and gravitational acceleration constant, the gravitational potential energy of an object depends only on its _________ ", answer:["height"]},
    {type:'mcq', q:"Which of the following is an example of positive work?", options:["Lifting a box upwards","Holding a box stationary","Friction slowing a moving box","A book resting on a table"], answer:"Lifting a box upwards"},
    {type:'mcq', q:"Which of the following is an example of negative work?", options:["Pulling a sled forward","Pushing against a moving wall","Friction slowing a moving object","A ball falling freely"], answer:"Friction slowing a moving object"},
    {type:'mcq', q:"If a force is perpendicular to displacement, the work done is:", options:["Positive","Negative","Zero","Depends on mass"], answer:"Zero"},
    {type:'fill', q:"Most of the energy lost by an object due to friction is converted into ______ energy", answer:["thermal", "heat"]},
    {type:'mcq', q:"When is work considered negative?:", options:["When force is applied downward","When friction acts in the direction of motion","When force and displacements are in opposite directions","When no displacement occurs"], answer:"When force and displacements are in the opposite directions"},
    {type:'mcq', q:"A child pulls a toy with a 15 N force at an angle of 60° to the horizontal, causing it to move 2 m horizontally. The work done is approximately:", options:["15 J","30 J","60 J","0 J"], answer:"15 J"},
    {type:'fill', q:"The energy exhibited by a moving object is called ________", answer:["kinetic energy", "KE"]},
    {type:'mcq', q:"When a rollercoaster descends from height, the work done by gravity is:", options:["Positive","Negative","Zero","Depends on friction"], answer:"Positive"},
    {type:'mcq', q:"If the net work done on an object is positive, its kinetic energy:", options:["Increases","Decreases","Remains constant","Becomes negative"], answer:"Increases"},
    {type:'mcq', q:"If the net work done on an object is zero, its speed:", options:["Remains constant","Increases","Decreases","Reverses"], answer:"Remains constant"},
    {type:'fill', q:"John pushes against a hard wall, applying substantial force. However, the wall does not move. John has done _______ work.", answer:["Zero", "0"]},
    {type:'mcq', q:"A car engine does 50,000 J of work while friction does –10,000 J. The net work done is:", options:["40,000 J","50,000 J","60,000 J","10,000 J"], answer:"40,000 J"},
    {type:'fill', q:"The sum of the kinetic energy and potential energy of an object at any given point of movement is known as __________", answer:["Mechanical Energy"]},
    {type:'mcq', q:"A 20 kg object slides down a frictionless incline of height 4 m. Work done by gravity is:", options:["80 J","400 J","800 J","200 J"], answer:"800 J"},
    {type:'mcq', q:"Braking a moving car to a stop, the work done by friction is:", options:["Positive","Negative","Zero","Depends on mass"], answer:"Negative"},
    {type:'fill', q:"A 30kg object is free-falling. At height 40m, its potential energy is _________? Note, all possible answers have been recorded. ", answer:["11760J", "11760", "11760 J", "12000", "12000J", "12000 J", "11772J", "11772", "11772 J"]},
    {type:'mcq', q:"Both Kinetic energy and potential energy may increase simultaneously due to:", options:["Propulsive force","Gravitational force","Drag","Inertia"], answer:"Propulsive force"},
    {type:'mcq', q:"A worker pushes a cart with 80 N at 30° below the horizontal for 10 m. The work done by the worker is approximately:", options:["692 J","800 J","400 J","0 J"], answer:"692 J"}
];

function shuffleArray(arr){ return arr.sort(() => Math.random() - 0.5); }
shuffleArray(questions);
questions.forEach(q => { if(q.type==='mcq'){ shuffleArray(q.options); } });

const container = document.getElementById('quiz-container');

function renderQuiz(){
    container.innerHTML = '';
    questions.forEach((q, idx)=>{
        const div = document.createElement('div');
        div.classList.add('question');
        div.id = `qdiv${idx}`;
        div.innerHTML = `<p>${idx+1}. ${q.q}</p>`;
        if(q.type==='mcq'){
            div.innerHTML += '<div class="options">' + q.options.map(opt => 
                `<label><input type="radio" name="q${idx}" value="${opt}"> ${opt}</label>`).join('') + '</div>';
        } else if(q.type==='fill'){
            div.innerHTML += `<input type="text" id="q${idx}" placeholder="Type your answer here">`;
        } else if(q.type==='tf'){
            div.innerHTML += '<div class="options">' + ['True','False'].map(opt => 
                `<label><input type="radio" name="q${idx}" value="${opt}"> ${opt}</label>`).join('') + '</div>';
        }
        container.appendChild(div);
    });
    document.getElementById('score').innerText = '';
    document.getElementById('submission-message').textContent = '';
}

// Timer Security Fix
let remaining = 45*60;
const timerEl = document.getElementById('timer');
let timerId;
function pad(n){ return n.toString().padStart(2,'0'); }
function disableQuiz(){
    const inputs = document.querySelectorAll('#quiz-container input');
    inputs.forEach(input=>{
        input.disabled = true;
        input.style.backgroundColor = '#f0f0f0';
    });
    const restartBtn = document.getElementById('restartBtn');
    restartBtn.disabled = true;
    restartBtn.style.backgroundColor = '#cccccc';
    restartBtn.style.cursor = 'not-allowed';
}
function updateTimer(){
    const min = Math.floor(remaining/60);
    const sec = remaining % 60;
    timerEl.textContent = `${pad(min)}:${pad(sec)}`;
    if(remaining <= 0){
        clearInterval(timerId);
        disableQuiz();
        alert('Time is up! Quiz is now disabled.');
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        if(nameInput.value.trim() && emailInput.value.trim()){
            checkAnswers();
        } else {
            document.getElementById('submission-message').textContent = 
                'Time is up! Please enter your name and email, then click Submit to save your score.';
            document.getElementById('submission-message').style.color = 'red';
        }
        return;
    }
    remaining--;
}

function startTimer(){
    clearInterval(timerId);
    timerId = setInterval(updateTimer,1000);
    updateTimer();
}

// Check Answers
async function checkAnswers(){
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const msgEl = document.getElementById('submission-message');
    msgEl.textContent = '';

    if(!nameInput.value.trim()){ msgEl.textContent = "Name is required!"; nameInput.focus(); return; }
    if(!emailInput.value.trim()){ msgEl.textContent = "Email is required!"; emailInput.focus(); return; }

    const name = nameInput.value.trim();
    const email = emailInput.value.trim();
    let score = 0;

    questions.forEach((q, idx)=>{
        const div = document.getElementById(`qdiv${idx}`);
        div.classList.remove('correct','wrong');
        if(q.type==='mcq' || q.type==='tf'){
            const selected = document.querySelector(`input[name="q${idx}"]:checked`);
            if(selected){
                if(selected.value === q.answer){ div.classList.add('correct'); score++; }
                else { div.classList.add('wrong'); div.innerHTML += `<p style="color:#01579b;">Correct: ${q.answer}</p>`; }
            } else { div.classList.add('wrong'); div.innerHTML += `<p style="color:#01579b;">Correct: ${q.answer}</p>`; }
        } else if(q.type==='fill'){
            const userAns = document.getElementById(`q${idx}`).value.trim().toLowerCase();
            const answers = Array.isArray(q.answer)? q.answer.map(a=>a.toLowerCase()): [q.answer.toLowerCase()];
            if(answers.includes(userAns)){ div.classList.add('correct'); score++; }
            else { div.classList.add('wrong'); div.innerHTML += `<p style="color:#01579b;">Correct: ${Array.isArray(q.answer)?q.answer[0]:q.answer}</p>`; }
        }
    });

    document.getElementById('score').innerText = `Your score: ${score} / ${questions.length}`;

    // Submit to backend
    try{
        const response = await fetch('https://myedu-backend.onrender.com/submit-quiz',{
            method:'POST',
            headers:{ 'Content-Type':'application/json' },
            body: JSON.stringify({ name, email, score, total: questions.length, test:2 })
        });
        const result = await response.json();
        msgEl.textContent = result.message || "Score submitted successfully!";
    } catch(err){ console.error(err); msgEl.textContent = "Error sending score to server."; }
}

// Restart Quiz
function restartQuiz(){
    shuffleArray(questions);
    questions.forEach(q=>{ if(q.type==='mcq'){ shuffleArray(q.options); }} );
    renderQuiz();
}

// Initial Render
renderQuiz();
startTimer();
</script>

</body>
</html>
