<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AP Calculus Quiz – Limits | Tklesson</title>

<link rel="canonical" href="https://tklesson.com/" />
<link rel="icon" type="image/png" sizes="16x16" href="/Tklesson1-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/Tklesson1-32x32.png">
<link rel="icon" type="image/png" sizes="48x48" href="/Tklesson1-48x48.png">
<link rel="icon" type="image/png" sizes="64x64" href="/Tklesson1-64x64.png">
<link rel="icon" type="image/png" sizes="192x192" href="/Tklesson1-192x192.png">
<link rel="apple-touch-icon" href="/Tklesson1-192x192.png">
<meta name="theme-color" content="#0f4c81">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto+Slab:wght@400;500;600;700&display=swap" rel="stylesheet">

<script async src="https://www.googletagmanager.com/gtag/js?id=G-99H54WVS80"></script>
<script>
  window.addEventListener('load', function() {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-99H54WVS80');
  });
</script>

<style>
:root {
  --primary: #0f4c81;
  --primary-light: #1a5d9f;
  --primary-dark: #0a3a66;
  --secondary: #ff9e1b;
  --secondary-light: #ffb04d;
  --secondary-dark: #e58a0c;
  --accent: #e6375a;
  --light: #f8fafc;
  --dark: #1e293b;
  --gray: #94a3b8;
  --success: #27ae60;
  --error: #e74c3c;
  --warning: #f39c12;
  --text: #2d3748;
  --text-light: #718096;
  --border: #e2e8f0;
  --card-bg: #ffffff;
  --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --gradient: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  --gradient-secondary: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Poppins', sans-serif;
  line-height: 1.6;
  color: var(--text);
  background: linear-gradient(135deg, #f0f8ff 0%, #e6f7ff 100%);
  min-height: 100vh;
  overflow-x: hidden;
}

.selectable {
  -webkit-user-select: text;
  -khtml-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

img {
  max-width: 100%;
}

.container {
  width: 100%;
  max-width: 1000px;
  margin: 0 auto;
  padding: 0 1.5rem;
}

/* Header */
.quiz-header {
  background: var(--gradient);
  color: white;
  padding: 1.5rem 2rem;
  text-align: center;
  position: relative;
  overflow: hidden;
  box-shadow: var(--shadow);
}

.quiz-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
  opacity: 0.5;
}

.header-content {
  position: relative;
  z-index: 1;
}

.header-logo {
  height: 60px;
  margin-bottom: 0.5rem;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
}

.header-title {
  font-family: 'Roboto Slab', serif;
  font-size: 2.2rem;
  margin-bottom: 0.5rem;
  font-weight: 700;
  text-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.header-subtitle {
  font-size: 1.1rem;
  opacity: 0.9;
  color: #e2e8f0;
  font-weight: 400;
}

/* Quiz Container */
.quiz-container {
  background: white;
  border-radius: 1rem;
  margin: 2rem auto;
  padding: 2rem;
  box-shadow: var(--shadow-lg);
  position: relative;
  overflow: hidden;
}

.quiz-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 5px;
  background: var(--gradient-secondary);
}

.questions-container {
  margin-bottom: 2rem;
}

.question-card {
  background: #f8fafc;
  border-radius: 0.75rem;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  border-left: 4px solid var(--primary);
  transition: all 0.3s ease;
  position: relative;
}

.question-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}

.question-number {
  position: absolute;
  top: -12px;
  left: 15px;
  background: var(--primary);
  color: white;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.9rem;
  box-shadow: var(--shadow);
}

.question-text {
  font-weight: 600;
  margin-bottom: 1.5rem;
  color: var(--dark);
  font-size: 1.1rem;
  padding-top: 0.5rem;
}

.options-container {
  display: grid;
  gap: 0.75rem;
}

.option {
  background: white;
  border: 2px solid var(--border);
  border-radius: 0.5rem;
  padding: 0.75rem 1rem;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 0.95rem;
}

.option:hover {
  border-color: var(--primary);
  background: rgba(15, 76, 129, 0.03);
}

.option.selected {
  border-color: var(--primary);
  background: rgba(15, 76, 129, 0.08);
}

.option.correct {
  border-color: var(--success);
  background: rgba(39, 174, 96, 0.1);
}

.option.incorrect {
  border-color: var(--error);
  background: rgba(231, 76, 60, 0.1);
}

.option input[type="radio"] {
  margin-right: 10px;
}

/* Buttons */
.buttons-container {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
  margin-bottom: 1.5rem;
}

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem 1.5rem;
  border-radius: 0.5rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  border: none;
  outline: none;
  font-size: 1rem;
  font-family: 'Poppins', sans-serif;
}

.btn-primary {
  background: var(--primary);
  color: white;
}

.btn-primary:hover {
  background: var(--primary-light);
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.btn-secondary {
  background: var(--secondary);
  color: white;
}

.btn-secondary:hover {
  background: var(--secondary-light);
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.btn-success {
  background: var(--success);
  color: white;
}

.btn-success:hover {
  background: #219653;
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: none !important;
  box-shadow: none !important;
}

/* Results */
.results-container {
  margin-top: 2rem;
  padding: 1.5rem;
  border-radius: 0.75rem;
  background: #f1f5f9;
  display: none;
  border-left: 4px solid var(--primary);
}

.score-display {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 1rem;
  text-align: center;
  color: var(--dark);
}

.correct-answer {
  color: var(--success);
  font-weight: 600;
  margin-top: 0.5rem;
  font-size: 0.95rem;
}

/* Message */
.message {
  padding: 1rem;
  border-radius: 0.5rem;
  margin-top: 1rem;
  font-weight: 500;
  text-align: center;
  display: none;
}

.message-error {
  background: #fee2e2;
  color: var(--error);
  border: 1px solid #fecaca;
}

.message-success {
  background: #d1fae5;
  color: var(--success);
  border: 1px solid #a7f3d0;
}

/* Animation */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fadeIn {
  animation: fadeIn 0.5s ease forwards;
}

/* Responsive */
@media (max-width: 768px) {
  .quiz-header {
    padding: 1rem;
  }
  
  .header-title {
    font-size: 1.8rem;
  }
  
  .header-subtitle {
    font-size: 1rem;
  }
  
  .quiz-container {
    padding: 1.5rem;
    margin: 1rem;
  }
  
  .buttons-container {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
  }
}

/* MathJax styling */
.MathJax {
  font-size: 1.1rem !important;
}

.mjx-chtml {
  outline: none;
}
</style>
<!-- MathJax Configuration -->
<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    processEscapes: true,
    processEnvironments: true
  },
  options: {
    skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
};
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>

<header class="quiz-header">
    <div class="header-content">
        <img src="Tklesson1.png" alt="Tklesson Logo" class="header-logo">
        <h1 class="header-title">AP Calculus Quiz – Limits</h1>
        <p class="header-subtitle">Multiple Choice Assessment</p>
    </div>
</header>

<div class="container">
    <div class="quiz-container">
        <div id="startScreen" style="text-align: center; padding: 2rem;">
            <p style="font-size: 1.2rem; margin-bottom: 1.5rem;">This quiz contains 20 multiple choice questions on limit evaluation. Select the correct answer for each problem.</p>
            <button id="startBtn" class="btn btn-primary" style="font-size: 1.2rem; padding: 1rem 2rem;">Begin Quiz</button>
        </div>

        <div id="quizContent" style="display: none;">
            <div id="questions-container" class="questions-container"></div>

            <div class="buttons-container">
                <button id="submitBtn" class="btn btn-primary">Submit Answers</button>
                <button id="restartBtn" class="btn btn-secondary">Restart Quiz</button>
                <button id="solution-btn" class="btn btn-success">View Solution Pack</button>
            </div>

            <div id="results-container" class="results-container"></div>
            <div id="message" class="message"></div>
        </div>
    </div>
</div>

<script>
// ============================================================
// AP Calculus Limits MCQ Quiz
// ============================================================

const questions = [
  // Part A: Rationalization of Surds (Limits)
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 4} \\frac{\\sqrt{x} - 2}{x - 4}$",
    options: [
      "$\\frac{1}{4}$",
      "$\\frac{1}{2}$",
      "$\\frac{1}{8}$",
      "$2$"
    ],
    answer: 0,
    explanation: "Rationalize by multiplying numerator and denominator by $\\sqrt{x} + 2$: $\\frac{x-4}{(x-4)(\\sqrt{x}+2)} = \\frac{1}{\\sqrt{x}+2}$. Evaluating at $x=4$ gives $\\frac{1}{\\sqrt{4}+2} = \\frac{1}{4}$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 9} \\frac{\\sqrt{x} - 3}{x - 9}$",
    options: [
      "$\\frac{1}{6}$",
      "$\\frac{1}{3}$",
      "$\\frac{1}{9}$",
      "$3$"
    ],
    answer: 0,
    explanation: "Multiply numerator and denominator by $\\sqrt{x} + 3$: $\\frac{x-9}{(x-9)(\\sqrt{x}+3)} = \\frac{1}{\\sqrt{x}+3}$. At $x=9$, $\\frac{1}{\\sqrt{9}+3} = \\frac{1}{6}$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\sqrt{x + 1} - 1}{x}$",
    options: [
      "$\\frac{1}{2}$",
      "$1$",
      "$2$",
      "$0$"
    ],
    answer: 0,
    explanation: "Rationalize: $\\frac{(x+1)-1}{x(\\sqrt{x+1}+1)} = \\frac{x}{x(\\sqrt{x+1}+1)} = \\frac{1}{\\sqrt{x+1}+1}$. As $x\\to0$, this approaches $\\frac{1}{1+1} = \\frac{1}{2}$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\sqrt{4 + x} - 2}{x}$",
    options: [
      "$\\frac{1}{4}$",
      "$\\frac{1}{2}$",
      "$1$",
      "$2$"
    ],
    answer: 0,
    explanation: "Multiply numerator and denominator by $\\sqrt{4+x}+2$: $\\frac{(4+x)-4}{x(\\sqrt{4+x}+2)} = \\frac{x}{x(\\sqrt{4+x}+2)} = \\frac{1}{\\sqrt{4+x}+2}$. As $x\\to0$, this becomes $\\frac{1}{\\sqrt{4}+2} = \\frac{1}{4}$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\sqrt{1 + x} - \\sqrt{1 - x}}{x}$",
    options: [
      "$1$",
      "$\\frac{1}{2}$",
      "$\\sqrt{2}$",
      "$0$"
    ],
    answer: 0,
    explanation: "Rationalize numerator: $\\frac{(1+x)-(1-x)}{x(\\sqrt{1+x}+\\sqrt{1-x})} = \\frac{2x}{x(\\sqrt{1+x}+\\sqrt{1-x})} = \\frac{2}{\\sqrt{1+x}+\\sqrt{1-x}}$. As $x\\to0$, this approaches $\\frac{2}{1+1} = 1$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 1} \\frac{\\sqrt{x + 3} - 2}{x - 1}$",
    options: [
      "$\\frac{1}{4}$",
      "$\\frac{1}{2}$",
      "$1$",
      "$2$"
    ],
    answer: 0,
    explanation: "Multiply by conjugate: $\\frac{(x+3)-4}{(x-1)(\\sqrt{x+3}+2)} = \\frac{x-1}{(x-1)(\\sqrt{x+3}+2)} = \\frac{1}{\\sqrt{x+3}+2}$. At $x=1$, $\\frac{1}{\\sqrt{4}+2} = \\frac{1}{4}$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\sqrt{x^2 + 9} - 3}{x^2}$",
    options: [
      "$\\frac{1}{6}$",
      "$\\frac{1}{3}$",
      "$\\frac{1}{9}$",
      "$\\frac{1}{2}$"
    ],
    answer: 0,
    explanation: "Rationalize: $\\frac{(x^2+9)-9}{x^2(\\sqrt{x^2+9}+3)} = \\frac{x^2}{x^2(\\sqrt{x^2+9}+3)} = \\frac{1}{\\sqrt{x^2+9}+3}$. As $x\\to0$, this approaches $\\frac{1}{\\sqrt{9}+3} = \\frac{1}{6}$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 4} \\frac{\\sqrt{5x + 4} - 6}{x - 4}$",
    options: [
      "$\\frac{5}{12}$",
      "$\\frac{1}{2}$",
      "$\\frac{5}{6}$",
      "$\\frac{2}{3}$"
    ],
    answer: 0,
    explanation: "Rationalize: $\\frac{(5x+4)-36}{(x-4)(\\sqrt{5x+4}+6)} = \\frac{5(x-4)}{(x-4)(\\sqrt{5x+4}+6)} = \\frac{5}{\\sqrt{5x+4}+6}$. At $x=4$, $\\sqrt{5(4)+4} = \\sqrt{24} = 2\\sqrt{6}$, so $\\frac{5}{2\\sqrt{6}+6} = \\frac{5}{2(\\sqrt{6}+3)} = \\frac{5}{12}$ when rationalized."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\sqrt{2 + x} - \\sqrt{2 - x}}{x}$",
    options: [
      "$\\frac{1}{\\sqrt{2}}$",
      "$\\sqrt{2}$",
      "$1$",
      "$\\frac{1}{2}$"
    ],
    answer: 0,
    explanation: "Rationalize numerator: $\\frac{(2+x)-(2-x)}{x(\\sqrt{2+x}+\\sqrt{2-x})} = \\frac{2x}{x(\\sqrt{2+x}+\\sqrt{2-x})} = \\frac{2}{\\sqrt{2+x}+\\sqrt{2-x}}$. As $x\\to0$, this approaches $\\frac{2}{\\sqrt{2}+\\sqrt{2}} = \\frac{2}{2\\sqrt{2}} = \\frac{1}{\\sqrt{2}}$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\sqrt{1 + 2x} - \\sqrt{1 - 2x}}{x}$",
    options: [
      "$2$",
      "$1$",
      "$\\frac{1}{2}$",
      "$4$"
    ],
    answer: 0,
    explanation: "Rationalize: $\\frac{(1+2x)-(1-2x)}{x(\\sqrt{1+2x}+\\sqrt{1-2x})} = \\frac{4x}{x(\\sqrt{1+2x}+\\sqrt{1-2x})} = \\frac{4}{\\sqrt{1+2x}+\\sqrt{1-2x}}$. As $x\\to0$, this approaches $\\frac{4}{1+1} = 2$."
  },

  // Part B: Trigonometric Limits
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\sin(x)}{x}$",
    options: [
      "$1$",
      "$0$",
      "$\\infty$",
      "Does not exist"
    ],
    answer: 0,
    explanation: "This is the fundamental trigonometric limit. Geometrically, for small $x$, $\\sin x \\approx x$, so their ratio approaches 1. Can be proven using the Squeeze Theorem."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\tan(x)}{x}$",
    options: [
      "$1$",
      "$0$",
      "$\\infty$",
      "$-1$"
    ],
    answer: 0,
    explanation: "$\\frac{\\tan x}{x} = \\frac{\\sin x}{x} \\cdot \\frac{1}{\\cos x}$. Since $\\lim_{x\\to0} \\frac{\\sin x}{x} = 1$ and $\\lim_{x\\to0} \\cos x = 1$, the product is $1 \\times 1 = 1$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\sin(5x)}{x}$",
    options: [
      "$5$",
      "$1$",
      "$\\frac{1}{5}$",
      "$0$"
    ],
    answer: 0,
    explanation: "Let $u = 5x$, then as $x \\to 0$, $u \\to 0$. The limit becomes $\\lim_{u\\to0} \\frac{\\sin u}{u/5} = 5 \\lim_{u\\to0} \\frac{\\sin u}{u} = 5 \\times 1 = 5$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\sin(3x)}{\\sin(2x)}$",
    options: [
      "$\\frac{3}{2}$",
      "$\\frac{2}{3}$",
      "$1$",
      "$\\frac{3}{4}$"
    ],
    answer: 0,
    explanation: "Rewrite as $\\frac{\\sin(3x)}{3x} \\cdot \\frac{2x}{\\sin(2x)} \\cdot \\frac{3}{2}$. Each ratio approaches 1, so the limit is $1 \\times 1 \\times \\frac{3}{2} = \\frac{3}{2}$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{1 - \\cos(x)}{x}$",
    options: [
      "$0$",
      "$1$",
      "$\\frac{1}{2}$",
      "$\\infty$"
    ],
    answer: 0,
    explanation: "Use the identity $1 - \\cos x = 2\\sin^2(\\frac{x}{2})$. Then $\\frac{1-\\cos x}{x} = \\frac{2\\sin^2(x/2)}{x} = \\frac{\\sin(x/2)}{x/2} \\cdot \\sin(x/2)$. As $x\\to0$, this approaches $1 \\times 0 = 0$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{1 - \\cos(x)}{x^2}$",
    options: [
      "$\\frac{1}{2}$",
      "$1$",
      "$0$",
      "$2$"
    ],
    answer: 0,
    explanation: "Using $1 - \\cos x = 2\\sin^2(\\frac{x}{2})$, we get $\\frac{2\\sin^2(x/2)}{x^2} = \\frac{1}{2} \\left(\\frac{\\sin(x/2)}{x/2}\\right)^2$. As $x\\to0$, $\\frac{\\sin(x/2)}{x/2} \\to 1$, so the limit is $\\frac{1}{2} \\times 1^2 = \\frac{1}{2}$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\sin(x)}{1 - \\cos(x)}$",
    options: [
      "Does not exist",
      "$0$",
      "$1$",
      "$\\infty$"
    ],
    answer: 0,
    explanation: "As $x\\to0$, numerator $\\sin x \\approx x$ and denominator $1-\\cos x \\approx \\frac{x^2}{2}$, so the ratio $\\approx \\frac{x}{x^2/2} = \\frac{2}{x}$, which approaches $\\pm\\infty$ depending on direction. Therefore, the limit does not exist in the finite sense."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\tan(4x)}{\\sin(2x)}$",
    options: [
      "$2$",
      "$1$",
      "$4$",
      "$\\frac{1}{2}$"
    ],
    answer: 0,
    explanation: "Rewrite as $\\frac{\\tan(4x)}{4x} \\cdot \\frac{2x}{\\sin(2x)} \\cdot \\frac{4}{2} = \\frac{\\tan(4x)}{4x} \\cdot \\frac{2x}{\\sin(2x)} \\cdot 2$. Each ratio approaches 1, so the limit is $1 \\times 1 \\times 2 = 2$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\tan^2(x)}{x^2}$",
    options: [
      "$1$",
      "$0$",
      "$\\infty$",
      "$\\frac{1}{2}$"
    ],
    answer: 0,
    explanation: "$\\frac{\\tan^2 x}{x^2} = \\left(\\frac{\\tan x}{x}\\right)^2$. Since $\\lim_{x\\to0} \\frac{\\tan x}{x} = 1$, the squared limit is $1^2 = 1$."
  },
  { 
    type: 'mcq', 
    q: "$\\displaystyle \\lim_{x \\to 0} \\frac{\\sin(ax)}{\\sin(bx)}$ where $a$ and $b$ are non-zero constants",
    options: [
      "$\\frac{a}{b}$",
      "$1$",
      "$\\frac{b}{a}$",
      "$0$"
    ],
    answer: 0,
    explanation: "Rewrite as $\\frac{\\sin(ax)}{ax} \\cdot \\frac{bx}{\\sin(bx)} \\cdot \\frac{a}{b}$. As $x\\to0$, $\\frac{\\sin(ax)}{ax} \\to 1$ and $\\frac{bx}{\\sin(bx)} \\to 1$, so the limit is $1 \\times 1 \\times \\frac{a}{b} = \\frac{a}{b}$."
  }
];

// DOM elements
const questionsContainer = document.getElementById('questions-container');
const submitBtn = document.getElementById('submitBtn');
const restartBtn = document.getElementById('restartBtn');
const solutionBtn = document.getElementById('solution-btn');
const resultsContainer = document.getElementById('results-container');
const messageEl = document.getElementById('message');
const startBtn = document.getElementById('startBtn');
const startScreen = document.getElementById('startScreen');
const quizContent = document.getElementById('quizContent');

// Quiz state
let quizSubmitted = false;
let userAnswers = new Array(questions.length).fill(-1);

// Fisher-Yates shuffle algorithm
function shuffleArray(arr) { 
    const shuffled = [...arr];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
}

// Shuffle options for each question
function shuffleQuestions() {
    const shuffledQuestions = shuffleArray(questions.map(q => {
        // Create array of option indices
        const indices = [0, 1, 2, 3];
        const shuffledIndices = shuffleArray([...indices]);
        
        // Create new question object with shuffled options
        return {
            ...q,
            shuffledOptions: shuffledIndices.map(i => q.options[i]),
            correctAnswerIndex: shuffledIndices.indexOf(q.answer)
        };
    }));
    
    return shuffledQuestions;
}

let currentQuestions = [];

// Initialize quiz
function initQuiz() {
    currentQuestions = shuffleQuestions();
    renderQuiz();
    quizSubmitted = false;
    userAnswers = new Array(currentQuestions.length).fill(-1);
    solutionBtn.style.display = 'none';
    resultsContainer.style.display = 'none';
    messageEl.style.display = 'none';
}

// Render questions
function renderQuiz() {
    questionsContainer.innerHTML = '';
    
    currentQuestions.forEach((question, index) => {
        const questionEl = document.createElement('div');
        questionEl.className = 'question-card animate-fadeIn';
        questionEl.style.animationDelay = `${index * 0.05}s`;
        
        let optionsHTML = '';
        question.shuffledOptions.forEach((option, optionIndex) => {
            const isSelected = userAnswers[index] === optionIndex;
            optionsHTML += `
                <div class="option ${isSelected ? 'selected' : ''}" data-index="${index}" data-option="${optionIndex}">
                    <input type="radio" id="q${index}_${optionIndex}" name="q${index}" ${isSelected ? 'checked' : ''}>
                    <label for="q${index}_${optionIndex}">${option}</label>
                </div>
            `;
        });
        
        questionEl.innerHTML = `
            <div class="question-number">${index + 1}</div>
            <div class="question-text">${question.q}</div>
            <div class="options-container">${optionsHTML}</div>
        `;
        questionsContainer.appendChild(questionEl);
    });
    
    // Add event listeners to options
    document.querySelectorAll('.option').forEach(option => {
        option.addEventListener('click', function() {
            const questionIndex = parseInt(this.dataset.index);
            const optionIndex = parseInt(this.dataset.option);
            
            // Remove selected class from all options in this question
            const questionOptions = document.querySelectorAll(`.option[data-index="${questionIndex}"]`);
            questionOptions.forEach(opt => opt.classList.remove('selected'));
            
            // Add selected class to clicked option
            this.classList.add('selected');
            
            // Update the radio button
            const radio = this.querySelector('input[type="radio"]');
            radio.checked = true;
            
            // Store user's answer
            userAnswers[questionIndex] = optionIndex;
        });
    });
    
    // Re-render MathJax
    if (window.MathJax && MathJax.typesetPromise) {
        MathJax.typesetPromise();
    }
}

// Check answers
function checkAnswers() {
    if (userAnswers.some(answer => answer === -1)) {
        showMessage('Please answer all questions before submitting.', 'error');
        return;
    }
    
    let score = 0;
    
    // Check each question
    currentQuestions.forEach((question, index) => {
        const userAnswerIndex = userAnswers[index];
        const isCorrect = userAnswerIndex === question.correctAnswerIndex;
        
        // Get the option element
        const optionEl = document.querySelector(`.option[data-index="${index}"][data-option="${userAnswerIndex}"]`);
        
        if (isCorrect) {
            score++;
            optionEl.classList.add('correct');
        } else {
            optionEl.classList.add('incorrect');
            
            // Show correct answer
            const correctOptionEl = document.querySelector(`.option[data-index="${index}"][data-option="${question.correctAnswerIndex}"]`);
            correctOptionEl.classList.add('correct');
        }
        
        // Disable all options in this question
        const questionOptions = document.querySelectorAll(`.option[data-index="${index}"]`);
        questionOptions.forEach(opt => {
            const radio = opt.querySelector('input[type="radio"]');
            if (radio) radio.disabled = true;
            opt.style.cursor = 'default';
        });
    });
    
    // Display results
    showResults(score);
    
    // Show solution button
    solutionBtn.style.display = 'inline-block';
    quizSubmitted = true;
    
    // Show success message
    showMessage(`Quiz submitted! You scored ${score}/${currentQuestions.length}.`, 'success');
}

// Show results
function showResults(score) {
    resultsContainer.style.display = 'block';
    resultsContainer.innerHTML = `
        <div class="score-display">Your Score: ${score} / ${currentQuestions.length}</div>
        <div>${getScoreMessage(score, currentQuestions.length)}</div>
        <div style="margin-top: 1rem; font-size: 0.9rem; color: var(--text-light);">
            Click "View Solution Pack" for detailed explanations of each problem.
        </div>
    `;
}

// Get score message
function getScoreMessage(score, total) {
    const percentage = (score / total) * 100;
    
    if (percentage >= 90) {
        return 'Excellent! You demonstrate mastery of limit evaluation techniques.';
    } else if (percentage >= 75) {
        return 'Very good! You understand most limit evaluation methods.';
    } else if (percentage >= 60) {
        return 'Good work! Focus on practicing rationalization and trigonometric limits.';
    } else if (percentage >= 40) {
        return 'Keep practicing! Review the fundamental limit concepts.';
    } else {
        return 'Review the basic techniques: rationalization of surds and trigonometric limits.';
    }
}

// Show message
function showMessage(text, type) {
    messageEl.textContent = text;
    messageEl.className = `message message-${type}`;
    messageEl.style.display = 'block';
    setTimeout(() => {
        messageEl.style.display = 'none';
    }, 5000);
}

// Show solution pack
function showSolution() {
    const solutionWindow = window.open('', '_blank', 'width=1000,height=800');
    
    const solutionHTML = `
        <!DOCTYPE html>
        <html>
        <head>
            <title>AP Calculus Limits - Solution Pack | Tklesson</title>
            <script>
                window.MathJax = {
                    tex: {
                        inlineMath: [['$', '$'], ['\\\\(', '\\\\)']],
                        displayMath: [['$$', '$$'], ['\\\\[', '\\\\]']],
                        processEscapes: true,
                        processEnvironments: true
                    }
                };
            <\/script>
            <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"><\/script>
            <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"><\/script>
            <style>
                body {
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                    line-height: 1.6;
                    max-width: 900px;
                    margin: 0 auto;
                    padding: 20px;
                    background: #f9f9f9;
                }
                .solution-card {
                    background: white;
                    padding: 20px;
                    margin: 15px 0;
                    border-radius: 8px;
                    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
                    border-left: 4px solid #0f4c81;
                }
                .problem {
                    font-weight: 600;
                    color: #0f4c81;
                    margin-bottom: 10px;
                }
                .answer {
                    color: #27ae60;
                    font-weight: 600;
                    margin: 10px 0;
                }
                .explanation {
                    background: #f0f8ff;
                    padding: 15px;
                    border-radius: 6px;
                    margin-top: 10px;
                    font-size: 0.95em;
                }
                .method {
                    background: #e8f5e9;
                    padding: 10px;
                    border-radius: 6px;
                    margin: 8px 0;
                    font-size: 0.9em;
                }
            </style>
        </head>
        <body>
            <h1>AP Calculus Limits - Solution Pack</h1>
            <p>Detailed solutions with step-by-step reasoning using basic algebraic and trigonometric methods.</p>
            
            ${questions.map((q, i) => `
                <div class="solution-card">
                    <div class="problem">${i+1}. ${q.q}</div>
                    <div class="answer">Answer: ${q.options[q.answer]}</div>
                    <div class="method"><strong>Method:</strong> ${q.explanation}</div>
                </div>
            `).join('')}
            
            <div style="background: #e3f2fd; padding: 15px; border-radius: 6px; margin-top: 20px;">
                <strong>Key Techniques:</strong><br>
                1. <strong>Rationalization:</strong> Multiply numerator and denominator by conjugate to eliminate radicals<br>
                2. <strong>Trigonometric Limits:</strong> Use $\\lim_{\\theta\\to0}\\frac{\\sin\\theta}{\\theta}=1$ and algebraic manipulation<br>
                3. <strong>Factor Cancellation:</strong> Cancel common factors after algebraic simplification<br>
                4. <strong>Substitution:</strong> Let $u = kx$ to transform to standard forms
            </div>
        </body>
        </html>
    `;
    
    solutionWindow.document.write(solutionHTML);
    solutionWindow.document.close();
}

// Event listeners
submitBtn.addEventListener('click', checkAnswers);

restartBtn.addEventListener('click', () => {
    initQuiz();
    showMessage('Quiz restarted. Answer all questions carefully.', 'success');
});

solutionBtn.addEventListener('click', showSolution);

startBtn.addEventListener('click', () => {
    startScreen.style.display = 'none';
    quizContent.style.display = 'block';
    initQuiz();
});

// Initial setup
document.addEventListener('DOMContentLoaded', () => {
    // Hide quiz content initially, show start screen
    quizContent.style.display = 'none';
    startScreen.style.display = 'block';
});
</script>

</body>
</html>
