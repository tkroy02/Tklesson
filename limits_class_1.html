<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AP-Calculus Quiz – Tklesson</title>
<style>
    body { font-family: Arial, sans-serif; background: #f0f8ff; margin:0; padding:0; }
    header { background: #01579b; color: white; padding: 15px; text-align: center; }
    header img { max-height: 60px; vertical-align: middle; margin-right: 10px; }
    h1 { display: inline; font-size: 2em; }
    h2 { font-size: 1.2em; font-weight: normal; color: #e1f5fe; margin-top: 5px; }
    .quiz-container { max-width: 900px; margin: 30px auto; padding: 25px; background: white; border-radius: 12px; box-shadow: 0 0 15px #555; }
    .question { margin-bottom: 20px; padding: 10px; border-radius: 8px; background: #e1f5fe; }
    .question p { font-weight: bold; }
    input[type="text"] { width: 100%; padding: 6px; margin-top: 5px; border-radius: 4px; border: 1px solid #ccc; }
    button { background-color: #0288d1; color: white; padding: 10px 25px; border: none; cursor: pointer; font-size: 1em; border-radius: 5px; margin-top: 10px; margin-right: 10px; }
    button:hover { background-color: #01579b; }
    .correct { background-color: #c8e6c9; }
    .wrong { background-color: #ffcdd2; }
    #score { font-size: 1.3em; font-weight: bold; margin-top: 15px; }
    .timer { text-align: right; font-weight: bold; margin-bottom: 15px; }
    #solution-btn { display: none; background-color: #43a047; }
    #solution-btn:hover { background-color: #2e7d32; }
</style>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>

<header>
    <img src="Tklesson1.png" alt="Tklesson Logo">
    <h1>AP-Calculus Quiz – Tklesson</h1>
    <h2>Limits (Class 1)</h2>
</header>

<div class="quiz-container">
    <div class="timer" id="timer">60:00</div>
    <div id="quiz-container"></div>
    <button onclick="checkAnswers()">Submit</button>
    <button onclick="restartQuiz()">Restart Quiz</button>
    <button id="solution-btn" onclick="showSolution()">View Solution Pack</button>
    <div id="score"></div>
</div>

<script>
// === Questions with LaTeX syntax for MathJax ===
const questions = [
    {type:'fill', q:"\\(\\lim_{x \\to 2} \\frac{x^2 - 4}{x - 2}\\)", answer:["4"]},
    {type:'fill', q:"\\(\\lim_{x \\to 1} \\frac{x^3 - 1}{x - 1}\\)", answer:["3"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{x^2 + 3x}{x}\\)", answer:["3"]},
    {type:'fill', q:"\\(\\lim_{x \\to 5} \\frac{x^2 - 25}{x - 5}\\)", answer:["10"]},
    {type:'fill', q:"\\(\\lim_{x \\to 3} (2x + 1)\\)", answer:["7"]},
    {type:'fill', q:"\\(\\lim_{x \\to -1} (x^2 + 4x + 3)\\)", answer:["0"]},
    {type:'fill', q:"\\(\\lim_{x \\to 4} \\frac{x^2 - 16}{x - 4}\\)", answer:["8"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} (5x + 2)\\)", answer:["2"]},
    {type:'fill', q:"\\(\\lim_{x \\to 2} \\frac{x^3 - 8}{x - 2}\\)", answer:["12"]},
    {type:'fill', q:"\\(\\lim_{x \\to -2} \\frac{x^2 + 4}{x + 2}\\)", answer:["-2"]},
    {type:'fill', q:"\\(\\lim_{x \\to 1} \\frac{x^2 - 1}{x - 1}\\)", answer:["2"]},
    {type:'fill', q:"\\(\\lim_{x \\to 3} \\frac{x^2 - 9}{x - 3}\\)", answer:["6"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{x^3 + 2x^2}{x}\\)", answer:["0"]},
    {type:'fill', q:"\\(\\lim_{x \\to 2} (3x + 1)\\)", answer:["7"]},
    {type:'fill', q:"\\(\\lim_{x \\to -1} (x^2 + 2x)\\)", answer:["-1"]},
    {type:'fill', q:"\\(\\lim_{x \\to 5} \\frac{x^2 - 25}{x - 5}\\)", answer:["10"]},
    {type:'fill', q:"\\(\\lim_{x \\to 4} \\frac{x^2 - 16}{x - 4}\\)", answer:["8"]},
    {type:'fill', q:"\\(\\lim_{x \\to 0} \\frac{x^2 - 4x}{x}\\)", answer:["-4"]},
    {type:'fill', q:"\\(\\lim_{x \\to 3} \\frac{x^2 - 4}{x - 3}\\)", answer:["6"]},
    {type:'fill', q:"\\(\\lim_{x \\to 1} \\frac{x^3 - 1}{x - 1}\\)", answer:["3"]}
];

// Shuffle questions
function shuffleArray(arr){ return arr.sort(() => Math.random() - 0.5); }
shuffleArray(questions);

const container = document.getElementById('quiz-container');

function renderQuiz(){
    container.innerHTML = '';
    questions.forEach((q, idx)=>{
        const div = document.createElement('div');
        div.classList.add('question');
        div.id = `qdiv${idx}`;
        div.innerHTML = `<p>${idx+1}. ${q.q}</p>
                         <input type="text" id="q${idx}" placeholder="Type your answer here">`;
        container.appendChild(div);
    });
    document.getElementById('score').innerText = '';
    document.getElementById('solution-btn').style.display = 'none';
    MathJax.typesetPromise();
}

function checkAnswers(){
    let score = 0;
    questions.forEach((q, idx)=>{
        const div = document.getElementById(`qdiv${idx}`);
        div.classList.remove('correct','wrong');
        const userAns = document.getElementById(`q${idx}`).value.trim();
        const answers = Array.isArray(q.answer)? q.answer.map(a=>a.toString()): [q.answer.toString()];
        if(answers.includes(userAns)){
            div.classList.add('correct'); score++;
        } else {
            div.classList.add('wrong');
            div.innerHTML += `<p style="color:#01579b;">Correct answer: ${answers[0]}</p>`;
        }
    });
    document.getElementById('score').innerText = `Your score: ${score} / ${questions.length}`;
    document.getElementById('solution-btn').style.display = 'inline-block';
}

function restartQuiz(){
    shuffleArray(questions);
    renderQuiz();
}

// Timer: 60 minutes
let remaining = 60*60;
const timerEl = document.getElementById('timer');
function pad(n){ return n.toString().padStart(2,'0'); }
function updateTimer(){
    const min = Math.floor(remaining/60);
    const sec = remaining % 60;
    timerEl.textContent = `${pad(min)}:${pad(sec)}`;
    if(remaining <= 0){ clearInterval(timerId); alert('Time is up! Submitting quiz.'); checkAnswers(); }
    remaining--;
}
const timerId = setInterval(updateTimer,1000);
updateTimer();

// Open solution pack
function showSolution(){
    window.open('limits_class_1_solution.html','_blank');
}

renderQuiz();
</script>

</body>
</html>
